!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sketchbook=t():e.sketchbook=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=37)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),u=n(4),a=n(1),s=function(){function e(t){if(r(this,e),t instanceof e)return void(this._vector=t._vector.dup());if(!(0,u.typeCheck)("array",t)||2!==t.length)throw new a.ArgumentError("Initialized with wrong elements.");this._vector=new o.Vector([t[0],t[1],1])}return i(e,[{key:"add",value:function(t){if(!(t instanceof e))throw new TypeError("Added by wrong parameter.(Different class)");var n=this._vector.add(t._vector);return new e([n.e(1),n.e(2)])}},{key:"equal",value:function(e){return this._vector.eql(e._vector)}},{key:"x",get:function(){return this._vector.e(1)}},{key:"y",get:function(){return this._vector.e(2)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendingError=t.ArgumentError=t.CannotFoundError=t.ExtendableError=void 0;var i=n(10),o=r(i),u=n(32),a=r(u),s=n(31),l=r(s),c=n(33),f=r(c);t.ExtendableError=o.default,t.CannotFoundError=a.default,t.ArgumentError=l.default,t.ExtendingError=f.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),a=r(u),s=n(48),l=r(s),c=n(4),f=n(0),h=r(f),p=n(39),v=r(p),y=n(1),d=["orientation"],_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this._defaultCanvasOpt={fillStyle:"#000000",strokeStyle:"#000000",shadowColor:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineCap:"butt",lineJoin:"miter",lineWidth:1,miterLimit:10,globalAlpha:1,globalCompositeOperation:"source-over"},this._cs=new v.default,this._opt=Object.assign({x:0,y:0,visible:!0,isFilled:!1,isStroked:!0},this._defaultCanvasOpt),this.setOptions(t),this._position=new h.default([this._opt.x,this._opt.y]),this._uuid=(0,l.default)()}return o(e,[{key:"scale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._position;this._checkScaleValidate(e,t,n),this.translate(n.x,n.y),this._cs.scale(e,t),this.translate(-n.x,-n.y)}},{key:"setScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._position;this._checkScaleValidate(e,t,n),this._cs.pivot=n,this._cs.setScale(e,t)}},{key:"_checkScaleValidate",value:function(e,t,n){if((0,c.typeCheck)("undefined",e)||(0,c.typeCheck)("null",e)||(0,c.typeCheck)("undefined",t)||(0,c.typeCheck)("null",t))throw new y.ArgumentError("Both xScale and yScale must be needed.");if(!(0,c.typeCheck)("number",e)||!(0,c.typeCheck)("number",t))throw new TypeError("Both xScale and yScale must be numerical values.");if(e<=0||t<=0)throw new y.ArgumentError("Both xScale and yScale must be larger than 0.");if(!(n instanceof h.default))throw new TypeError("The pivot must be Point.")}},{key:"rotate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._position;e._checkRotateValidate(t,n),this.translate(n.x,n.y),this._cs.rotate(t),this.translate(-n.x,-n.y)}},{key:"setRotate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._position;e._checkRotateValidate(t,n),this._cs.pivot=n,this._cs.setRotate(t)}},{key:"translate",value:function(t,n){e._checkTranslateValidate(t,n),this._cs.translate(new h.default([t,n]))}},{key:"setTranslate",value:function(t,n){e._checkTranslateValidate(t,n),this._cs.setTranslate(new h.default([t,n]))}},{key:"getOption",value:function(e){return void 0!==e&&null!==e?a.default.includes(d,e)?this._cs.getOption(e):this._opt[e]:null}},{key:"setOption",value:function(e,t){var n=void 0!==e&&null!==e,r=void 0!==t&&null!==t;if(n&&r)return a.default.includes(d,e)?void this._cs.setOption(e,t):void(this._opt[e]=t)}},{key:"getOptions",value:function(){var e=this,t=Object.assign({},this._opt);return a.default.each(d,function(n){t[n]=e._cs._opt[n]}),t}},{key:"setOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({},t),a.default.each(t,function(n,r){a.default.includes(d,r)&&(e._cs.setOption(r,n),delete t[r])}),Object.assign(this._opt,t)}},{key:"renderShape",value:function(e){this.visible&&(this.beforeRender(e),this.render(e),this.afterRender(e))}},{key:"beforeRender",value:function(e){var t=e.context,n=e._cs.basis.multiply(this._cs.basis);t.setTransform(n.a,n.b,n.c,n.d,n.e,n.f),this.applyOptions(e)}},{key:"render",value:function(){throw new y.ExtendingError("The render isn't overridden. It need to be overridden.")}},{key:"afterRender",value:function(e){this.resetOptions(e)}},{key:"applyOptions",value:function(e){var t=this;a.default.each(this._defaultCanvasOpt,function(n,r){if(n=t._opt[r],(0,c.typeCheck)("function",n))return void(e.context[r]=n.call(t,e.context));e.context[r]=t._opt[r]})}},{key:"resetOptions",value:function(e){a.default.each(this._defaultCanvasOpt,function(t,n){e.context[n]=t})}},{key:"fillStyle",get:function(){return this._opt.fillStyle},set:function(e){this._opt.fillStyle=e}},{key:"strokeStyle",get:function(){return this._opt.strokeStyle},set:function(e){this._opt.strokeStyle=e}},{key:"shadowColor",get:function(){return this._opt.shadowColor},set:function(e){this._opt.shadowColor=e}},{key:"shadowBlur",get:function(){return this._opt.shadowBlur},set:function(e){this._opt.shadowBlur=e}},{key:"shadowOffsetX",get:function(){return this._opt.shadowOffsetX},set:function(e){this._opt.shadowOffsetX=e}},{key:"shadowOffsetY",get:function(){return this._opt.shadowOffsetY},set:function(e){this._opt.shadowOffsetY=e}},{key:"lineCap",get:function(){return this._opt.lineCap},set:function(e){this._opt.lineCap=e}},{key:"lineJoin",get:function(){return this._opt.lineJoin},set:function(e){this._opt.lineJoin=e}},{key:"lineWidth",get:function(){return this._opt.lineWidth},set:function(e){this._opt.lineWidth=e}},{key:"miterLimit",get:function(){return this._opt.miterLimit},set:function(e){this._opt.miterLimit=e}},{key:"globalAlpha",get:function(){return this._opt.globalAlpha},set:function(e){this._opt.globalAlpha=e}},{key:"opacity",get:function(){return this.globalAlpha},set:function(e){this.globalAlpha=e}},{key:"globalCompositeOperation",get:function(){return this._opt.globalCompositeOperation},set:function(e){this._opt.globalCompositeOperation=e}},{key:"x",get:function(){return this._opt.x},set:function(e){this._opt.x=e,this._position=new h.default([this._opt.x,this._opt.y])}},{key:"y",get:function(){return this._opt.y},set:function(e){this._opt.y=e,this._position=new h.default([this._opt.x,this._opt.y])}},{key:"position",get:function(){return new h.default(this._position)},set:function(e){if(!(e instanceof h.default))throw new TypeError("Input position is not Point.");this._opt.x=e.x,this._opt.y=e.y,this._position=new h.default(e)}},{key:"xScale",get:function(){return this._cs._xScale}},{key:"yScale",get:function(){return this._cs._yScale}},{key:"radian",get:function(){return this._cs._radian}},{key:"basis",get:function(){return this._cs.basis}},{key:"visible",get:function(){return this._opt.visible},set:function(e){this._opt.visible=e}},{key:"isFilled",get:function(){return this._opt.isFilled},set:function(e){this._opt.isFilled=e}},{key:"isStroked",get:function(){return this._opt.isStroked},set:function(e){this._opt.isStroked=e}}],[{key:"_checkRotateValidate",value:function(e,t){if((0,c.typeCheck)("undefined",e)||(0,c.typeCheck)("null",e))throw new y.ArgumentError("A radian must be needed.");if(!(0,c.typeCheck)("number",e))throw new TypeError("A radian must be numerical values.");if(!(t instanceof h.default))throw new TypeError("The pivot must be Point.")}},{key:"_checkTranslateValidate",value:function(e,t){if((0,c.typeCheck)("undefined",e)||(0,c.typeCheck)("null",e)||(0,c.typeCheck)("undefined",t)||(0,c.typeCheck)("null",t))throw new y.ArgumentError("Both x and y must be needed.");if(!(0,c.typeCheck)("number",e)||!(0,c.typeCheck)("number",t))throw new TypeError("Both x and y must be numerical values.")}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),u=n(5),a=t.Vector=function(){function e(t){r(this,e),this.setElements(t)}return i(e,[{key:"e",value:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]}},{key:"dimensions",value:function(){return this.elements.length}},{key:"modulus",value:function(){return Math.sqrt(this.dot(this))}},{key:"eql",value:function(e){var t=this.elements.length,n=e.elements||e;if(t!==n.length)return!1;for(;t--;)if(Math.abs(this.elements[t]-n[t])>u.PRECISION)return!1;return!0}},{key:"dup",value:function(){return new e(this.elements)}},{key:"map",value:function(t,n){var r=[];return this.each(function(e,i){r.push(t.call(n,e,i))}),new e(r)}},{key:"forEach",value:function(e,t){for(var n=this.elements.length,r=0;r<n;r++)e.call(t,this.elements[r],r+1)}},{key:"toUnitVector",value:function(){var e=this.modulus();return 0===e?this.dup():this.map(function(t){return t/e})}},{key:"angleFrom",value:function(e){var t=e.elements||e,n=this.elements.length;if(n!==t.length)return null;var r=0,i=0,o=0;if(this.each(function(e,n){r+=e*t[n-1],i+=e*e,o+=t[n-1]*t[n-1]}),i=Math.sqrt(i),o=Math.sqrt(o),i*o==0)return null;var u=r/(i*o);return u<-1&&(u=-1),u>1&&(u=1),Math.acos(u)}},{key:"isParallelTo",value:function(e){var t=this.angleFrom(e);return null===t?null:t<=u.PRECISION}},{key:"isAntiparallelTo",value:function(e){var t=this.angleFrom(e);return null===t?null:Math.abs(t-Math.PI)<=u.PRECISION}},{key:"isPerpendicularTo",value:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=u.PRECISION}},{key:"add",value:function(e){var t=e.elements||e;return this.elements.length!==t.length?null:this.map(function(e,n){return e+t[n-1]})}},{key:"subtract",value:function(e){var t=e.elements||e;return this.elements.length!==t.length?null:this.map(function(e,n){return e-t[n-1]})}},{key:"multiply",value:function(e){return this.map(function(t){return t*e})}},{key:"dot",value:function(e){var t=e.elements||e,n=0,r=this.elements.length;if(r!==t.length)return null;for(;r--;)n+=this.elements[r]*t[r];return n}},{key:"cross",value:function(t){var n=t.elements||t;if(3!==this.elements.length||3!==n.length)return null;var r=this.elements;return new e([r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]])}},{key:"max",value:function(){for(var e=0,t=this.elements.length;t--;)Math.abs(this.elements[t])>Math.abs(e)&&(e=this.elements[t]);return e}},{key:"indexOf",value:function(e){for(var t=null,n=this.elements.length,r=0;r<n;r++)null===t&&this.elements[r]===e&&(t=r+1);return t}},{key:"toDiagonalMatrix",value:function(){return o.Matrix.Diagonal(this.elements)}},{key:"round",value:function(){return this.map(function(e){return Math.round(e)})}},{key:"snapTo",value:function(e){return this.map(function(t){return Math.abs(t-e)<=u.PRECISION?e:t})}},{key:"distanceFrom",value:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var t=e.elements||e;if(t.length!==this.elements.length)return null;var n,r=0;return this.each(function(e,i){n=e-t[i-1],r+=n*n}),Math.sqrt(r)}},{key:"liesOn",value:function(e){return e.contains(this)}},{key:"liesIn",value:function(e){return e.contains(this)}},{key:"rotate",value:function(t,n){var r,i,u,a,s=null;switch(t.determinant&&(s=t.elements),this.elements.length){case 2:return r=n.elements||n,2!==r.length?null:(s||(s=o.Matrix.Rotation(t).elements),i=this.elements[0]-r[0],u=this.elements[1]-r[1],new e([r[0]+s[0][0]*i+s[0][1]*u,r[1]+s[1][0]*i+s[1][1]*u]));case 3:if(!n.direction)return null;var l=n.pointClosestTo(this).elements;return s||(s=o.Matrix.Rotation(t,n.direction).elements),i=this.elements[0]-l[0],u=this.elements[1]-l[1],a=this.elements[2]-l[2],new e([l[0]+s[0][0]*i+s[0][1]*u+s[0][2]*a,l[1]+s[1][0]*i+s[1][1]*u+s[1][2]*a,l[2]+s[2][0]*i+s[2][1]*u+s[2][2]*a]);default:return null}}},{key:"reflectionIn",value:function(t){if(t.anchor){var n=this.elements.slice(),r=t.pointClosestTo(n).elements;return new e([r[0]+(r[0]-n[0]),r[1]+(r[1]-n[1]),r[2]+(r[2]-(n[2]||0))])}var i=t.elements||t;return this.elements.length!==i.length?null:this.map(function(e,t){return i[t-1]+(i[t-1]-e)})}},{key:"to3D",value:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e}},{key:"inspect",value:function(){return"["+this.elements.join(", ")+"]"}},{key:"setElements",value:function(e){return this.elements=(e.elements||e).slice(),this}},{key:"flatten",value:function(){return this.elements}}]),e}();a.Random=function(e){for(var t=[];e--;)t.push(Math.random());return new a(t)},a.Zero=function(e){for(var t=[];e--;)t.push(0);return new a(t)},a.prototype.x=a.prototype.multiply,a.prototype.each=a.prototype.forEach,a.i=new a([1,0,0]),a.j=new a([0,1,0]),a.k=new a([0,0,1])},function(e,t,n){"use strict";function r(e,t){if("object"==(void 0===e?"undefined":u(e))&&e.length){for(var n=e,r=0;r<n.length;r++)if(i(n[r],t))return!0;return!1}return i(e,t)}function i(e,t){return"string"==typeof e&&("string"==e?"string"==typeof t:"integer"==e?"number"==typeof t&&t%1==0:"float"==e?"number"==typeof t&&t%1!=0:"number"==e?"number"==typeof t:"boolean"==e?"boolean"==typeof t:"undefined"==e?void 0===t:"null"==e?null===t:"array"==e?t instanceof Array:"date"==e?t instanceof Date:"function"==e?"function"==typeof t:"object"==e&&!("object"!=(void 0===t?"undefined":u(t))||null===t||t instanceof Array||t instanceof Date||t instanceof RegExp))}function o(){var e={},t=new Promise(function(t,n){e.resolve=t,e.reject=n});return e.promise=t,e}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.typeCheck=r,t.defer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PRECISION=1e-6},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),u=n(3),a=t.Matrix=function(){function e(t){r(this,e),this.setElements(t)}return i(e,[{key:"e",value:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]}},{key:"row",value:function(e){return e>this.elements.length?null:new u.Vector(this.elements[e-1])}},{key:"col",value:function(e){if(0===this.elements.length)return null;if(e>this.elements[0].length)return null;for(var t=[],n=this.elements.length,r=0;r<n;r++)t.push(this.elements[r][e-1]);return new u.Vector(t)}},{key:"dimensions",value:function(){var e=0===this.elements.length?0:this.elements[0].length;return{rows:this.elements.length,cols:e}}},{key:"rows",value:function(){return this.elements.length}},{key:"cols",value:function(){return 0===this.elements.length?0:this.elements[0].length}},{key:"eql",value:function(t){var n=t.elements||t;if(n[0]&&void 0!==n[0][0]||(n=new e(n).elements),0===this.elements.length||0===n.length)return this.elements.length===n.length;if(this.elements.length!==n.length)return!1;if(this.elements[0].length!==n[0].length)return!1;for(var r,i=this.elements.length,u=this.elements[0].length;i--;)for(r=u;r--;)if(Math.abs(this.elements[i][r]-n[i][r])>o.PRECISION)return!1;return!0}},{key:"dup",value:function(){return new e(this.elements)}},{key:"map",value:function(t,n){if(0===this.elements.length)return new e([]);for(var r,i=[],o=this.elements.length,u=this.elements[0].length;o--;)for(r=u,i[o]=[];r--;)i[o][r]=t.call(n,this.elements[o][r],o+1,r+1);return new e(i)}},{key:"isSameSizeAs",value:function(t){var n=t.elements||t;return void 0===n[0][0]&&(n=new e(n).elements),0===this.elements.length?0===n.length:this.elements.length===n.length&&this.elements[0].length===n[0].length}},{key:"add",value:function(t){if(0===this.elements.length)return this.map(function(e){return e});var n=t.elements||t;return void 0===n[0][0]&&(n=new e(n).elements),this.isSameSizeAs(n)?this.map(function(e,t,r){return e+n[t-1][r-1]}):null}},{key:"subtract",value:function(t){if(0===this.elements.length)return this.map(function(e){return e});var n=t.elements||t;return void 0===n[0][0]&&(n=new e(n).elements),this.isSameSizeAs(n)?this.map(function(e,t,r){return e-n[t-1][r-1]}):null}},{key:"canMultiplyFromLeft",value:function(t){if(0===this.elements.length)return!1;var n=t.elements||t;return void 0===n[0][0]&&(n=new e(n).elements),this.elements[0].length===n.length}},{key:"multiply",value:function(t){if(0===this.elements.length)return null;if(!t.elements)return this.map(function(e){return e*t});var n=!!t.modulus,r=t.elements||t;if(void 0===r[0][0]&&(r=new e(r).elements),!this.canMultiplyFromLeft(r))return null;for(var i,o,u,a=this.elements.length,s=r[0].length,l=this.elements[0].length,c=[];a--;)for(i=s,c[a]=[];i--;){for(o=l,u=0;o--;)u+=this.elements[a][o]*r[o][i];c[a][i]=u}var r=new e(c);return n?r.col(1):r}},{key:"minor",value:function(t,n,r,i){if(0===this.elements.length)return null;for(var o,u,a,s=[],l=r,c=this.elements.length,f=this.elements[0].length;l--;)for(o=r-l-1,s[o]=[],u=i;u--;)a=i-u-1,s[o][a]=this.elements[(t+o-1)%c][(n+a-1)%f];return new e(s)}},{key:"transpose",value:function(){if(0===this.elements.length)return new e([]);for(var t,n,r=this.elements.length,i=this.elements[0].length,o=[],t=i;t--;)for(n=r,o[t]=[];n--;)o[t][n]=this.elements[n][t];return new e(o)}},{key:"isSquare",value:function(){var e=0===this.elements.length?0:this.elements[0].length;return this.elements.length===e}},{key:"max",value:function(){if(0===this.elements.length)return null;for(var e,t=0,n=this.elements.length,r=this.elements[0].length;n--;)for(e=r;e--;)Math.abs(this.elements[n][e])>Math.abs(t)&&(t=this.elements[n][e]);return t}},{key:"indexOf",value:function(e){if(0===this.elements.length)return null;var t,n,r=this.elements.length,i=this.elements[0].length;for(t=0;t<r;t++)for(n=0;n<i;n++)if(this.elements[t][n]===e)return{i:t+1,j:n+1};return null}},{key:"diagonal",value:function(){if(!this.isSquare)return null;for(var e=[],t=this.elements.length,n=0;n<t;n++)e.push(this.elements[n][n]);return new u.Vector(e)}},{key:"toRightTriangular",value:function(){if(0===this.elements.length)return new e([]);var t,n,r,i,o=this.dup(),u=this.elements.length,a=this.elements[0].length;for(n=0;n<u;n++){if(0===o.elements[n][n])for(r=n+1;r<u;r++)if(0!==o.elements[r][n]){for(t=[],i=0;i<a;i++)t.push(o.elements[n][i]+o.elements[r][i]);o.elements[n]=t;break}if(0!==o.elements[n][n])for(r=n+1;r<u;r++){var s=o.elements[r][n]/o.elements[n][n];for(t=[],i=0;i<a;i++)t.push(i<=n?0:o.elements[r][i]-o.elements[n][i]*s);o.elements[r]=t}}return o}},{key:"determinant",value:function(){if(0===this.elements.length)return 1;if(!this.isSquare())return null;for(var e=this.toRightTriangular(),t=e.elements[0][0],n=e.elements.length,r=1;r<n;r++)t*=e.elements[r][r];return t}},{key:"isSingular",value:function(){return this.isSquare()&&0===this.determinant()}},{key:"trace",value:function(){if(0===this.elements.length)return 0;if(!this.isSquare())return null;for(var e=this.elements[0][0],t=this.elements.length,n=1;n<t;n++)e+=this.elements[n][n];return e}},{key:"rank",value:function(){if(0===this.elements.length)return 0;for(var e,t=this.toRightTriangular(),n=0,r=this.elements.length,i=this.elements[0].length;r--;)for(e=i;e--;)if(Math.abs(t.elements[r][e])>o.PRECISION){n++;break}return n}},{key:"augment",value:function(t){if(0===this.elements.length)return this.dup();var n=t.elements||t;void 0===n[0][0]&&(n=new e(n).elements);var r,i=this.dup(),o=i.elements[0].length,u=i.elements.length,a=n[0].length;if(u!==n.length)return null;for(;u--;)for(r=a;r--;)i.elements[u][o+r]=n[u][r];return i}},{key:"inverse",value:function(){if(0===this.elements.length)return null;if(!this.isSquare()||this.isSingular())return null;for(var t,n,r,i,o,u=this.elements.length,a=u,s=this.augment(e.I(u)).toRightTriangular(),l=s.elements[0].length,c=[];a--;){for(r=[],c[a]=[],i=s.elements[a][a],n=0;n<l;n++)o=s.elements[a][n]/i,r.push(o),n>=u&&c[a].push(o);for(s.elements[a]=r,t=a;t--;){for(r=[],n=0;n<l;n++)r.push(s.elements[t][n]-s.elements[a][n]*s.elements[t][a]);s.elements[t]=r}}return new e(c)}},{key:"round",value:function(){return this.map(function(e){return Math.round(e)})}},{key:"snapTo",value:function(e){return this.map(function(t){return Math.abs(t-e)<=o.PRECISION?e:t})}},{key:"inspect",value:function(){var e=[],t=this.elements.length;if(0===t)return"[]";for(var n=0;n<t;n++)e.push(new u.Vector(this.elements[n]).inspect());return e.join("\n")}},{key:"setElements",value:function(e){var t,n,r=e.elements||e;if(r[0]&&void 0!==r[0][0]){for(t=r.length,this.elements=[];t--;)for(n=r[t].length,this.elements[t]=[];n--;)this.elements[t][n]=r[t][n];return this}var i=r.length;for(this.elements=[],t=0;t<i;t++)this.elements.push([r[t]]);return this}},{key:"flatten",value:function(){var e=[];if(0==this.elements.length)return[];for(var t=0;t<this.elements[0].length;t++)for(var n=0;n<this.elements.length;n++)e.push(this.elements[n][t]);return e}},{key:"ensure4x4",value:function(){if(4==this.elements.length&&4==this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var t=this.elements[e].length;t<4;t++)e==t?this.elements[e].push(1):this.elements[e].push(0);for(var e=this.elements.length;e<4;e++)0==e?this.elements.push([1,0,0,0]):1==e?this.elements.push([0,1,0,0]):2==e?this.elements.push([0,0,1,0]):3==e&&this.elements.push([0,0,0,1]);return this}},{key:"make3x3",value:function(){return 4!=this.elements.length||4!=this.elements[0].length?null:new e([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]])}}]),e}();a.I=function(e){for(var t,n=[],r=e;r--;)for(t=e,n[r]=[];t--;)n[r][t]=r===t?1:0;return new a(n)},a.Diagonal=function(e){for(var t=e.length,n=a.I(t);t--;)n.elements[t][t]=e[t];return n},a.Rotation=function(e,t){if(!t)return new a([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var n=t.dup();if(3!==n.elements.length)return null;var r=n.modulus(),i=n.elements[0]/r,o=n.elements[1]/r,u=n.elements[2]/r,s=Math.sin(e),l=Math.cos(e),c=1-l;return new a([[c*i*i+l,c*i*o-s*u,c*i*u+s*o],[c*i*o+s*u,c*o*o+l,c*o*u-s*i],[c*i*u-s*o,c*o*u+s*i,c*u*u+l]])},a.RotationX=function(e){var t=Math.cos(e),n=Math.sin(e);return new a([[1,0,0],[0,t,-n],[0,n,t]])},a.RotationY=function(e){var t=Math.cos(e),n=Math.sin(e);return new a([[t,0,n],[0,1,0],[-n,0,t]])},a.RotationZ=function(e){var t=Math.cos(e),n=Math.sin(e);return new a([[t,-n,0],[n,t,0],[0,0,1]])},a.Random=function(e,t){return a.Zero(e,t).map(function(){return Math.random()})},a.Translation=function(e){if(2==e.elements.length){var t=a.I(3);return t.elements[2][0]=e.elements[0],t.elements[2][1]=e.elements[1],t}if(3==e.elements.length){var t=a.I(4);return t.elements[0][3]=e.elements[0],t.elements[1][3]=e.elements[1],t.elements[2][3]=e.elements[2],t}throw"Invalid length for Translation"},a.Zero=function(e,t){for(var n,r=[],i=e;i--;)for(n=t,r[i]=[];n--;)r[i][n]=0;return new a(r)},a.prototype.toUpperTriangular=a.prototype.toRightTriangular,a.prototype.det=a.prototype.determinant,a.prototype.tr=a.prototype.trace,a.prototype.rk=a.prototype.rank,a.prototype.inv=a.prototype.inverse,a.prototype.x=a.prototype.multiply},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.GEOMETRY_TYPE=t.COORDINATE_SYSTEM=t.ORIGIN=t.ORIENTATION=void 0;var i=n(29),o=r(i),u=n(30),a=r(u),s=n(26),l=r(s),c=n(28),f=r(c);t.ORIENTATION=o.default,t.ORIGIN=a.default,t.COORDINATE_SYSTEM=l.default,t.GEOMETRY_TYPE=f.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=!0,r=!1,i=void 0;try{for(var o,u=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,s)}}catch(e){r=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}return e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.copyProperties=i;var a=Symbol();t.Enum=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];if(r(this,e),{}.hasOwnProperty.call(this.constructor,a))throw new Error("Enum classes can’t be instantiated");"object"===(void 0===t?"undefined":o(t))&&null!==t&&i(this,t)}return u(e,[{key:"toString",value:function(){return this.constructor.name+"."+this.name}}],[{key:"initEnum",value:function(e){return Object.defineProperty(this,"enumValues",{value:[],configurable:!1,writable:!1,enumerable:!0}),Array.isArray(e)?this._enumValuesFromArray(e):this._enumValuesFromObject(e),Object.freeze(this.enumValues),this[a]=!0,this}},{key:"_enumValuesFromArray",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value;this._pushEnumValue(new this,u)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_enumValuesFromObject",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(e)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value,a=new this(e[u]);this._pushEnumValue(a,u)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_pushEnumValue",value:function(e,t){e.name=t,e.ordinal=this.enumValues.length,Object.defineProperty(this,t,{value:e,configurable:!1,writable:!1,enumerable:!0}),this.enumValues.push(e)}},{key:"enumValueOf",value:function(e){return this.enumValues.find(function(t){return t.name===e})}},{key:Symbol.iterator,value:function(){return this.enumValues[Symbol.iterator]()}}]),e}()},function(e,t,n){(function(e,r){var i;(function(){function o(e,t){return e.set(t[0],t[1]),e}function u(e,t){return e.add(t),e}function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function s(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var u=e[i];t(r,u,n(u),e)}return r}function l(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function c(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function f(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[i++]=u)}return o}function p(e,t){return!!(null==e?0:e.length)&&x(e,t,0)>-1}function v(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function y(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function d(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function _(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function m(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function g(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function b(e){return e.split("")}function w(e){return e.match(zt)||[]}function k(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function O(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function x(e,t,n){return t===t?J(e,t,n):O(e,E,n)}function j(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function E(e){return e!==e}function P(e,t){var n=null==e?0:e.length;return n?I(e,t)/n:Ve}function C(e){return function(t){return null==t?ie:t[e]}}function T(e){return function(t){return null==e?ie:e[t]}}function S(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function M(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function I(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==ie&&(n=n===ie?o:n+o)}return n}function A(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function R(e,t){return y(t,function(t){return[t,e[t]]})}function V(e){return function(t){return e(t)}}function L(e,t){return y(t,function(t){return e[t]})}function N(e,t){return e.has(t)}function F(e,t){for(var n=-1,r=e.length;++n<r&&x(t,e[n],0)>-1;);return n}function D(e,t){for(var n=e.length;n--&&x(t,e[n],0)>-1;);return n}function z(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function W(e){return"\\"+Cn[e]}function B(e,t){return null==e?ie:e[t]}function Y(e){return gn.test(e)}function U(e){return bn.test(e)}function q(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function Z(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function $(e,t){return function(n){return e(t(n))}}function G(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var u=e[n];u!==t&&u!==ce||(e[n]=ce,o[i++]=n)}return o}function X(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function J(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function K(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function Q(e){return Y(e)?te(e):qn(e)}function ee(e){return Y(e)?ne(e):b(e)}function te(e){for(var t=_n.lastIndex=0;_n.test(e);)++t;return t}function ne(e){return e.match(_n)||[]}function re(e){return e.match(mn)||[]}var ie,oe=200,ue="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ae="Expected a function",se="__lodash_hash_undefined__",le=500,ce="__lodash_placeholder__",fe=1,he=2,pe=4,ve=1,ye=2,de=1,_e=2,me=4,ge=8,be=16,we=32,ke=64,Oe=128,xe=256,je=512,Ee=30,Pe="...",Ce=800,Te=16,Se=1,Me=2,Ie=1/0,Ae=9007199254740991,Re=1.7976931348623157e308,Ve=NaN,Le=4294967295,Ne=Le-1,Fe=Le>>>1,De=[["ary",Oe],["bind",de],["bindKey",_e],["curry",ge],["curryRight",be],["flip",je],["partial",we],["partialRight",ke],["rearg",xe]],ze="[object Arguments]",We="[object Array]",Be="[object AsyncFunction]",Ye="[object Boolean]",Ue="[object Date]",qe="[object DOMException]",Ze="[object Error]",$e="[object Function]",Ge="[object GeneratorFunction]",Xe="[object Map]",He="[object Number]",Je="[object Null]",Ke="[object Object]",Qe="[object Proxy]",et="[object RegExp]",tt="[object Set]",nt="[object String]",rt="[object Symbol]",it="[object Undefined]",ot="[object WeakMap]",ut="[object WeakSet]",at="[object ArrayBuffer]",st="[object DataView]",lt="[object Float32Array]",ct="[object Float64Array]",ft="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",vt="[object Uint8Array]",yt="[object Uint8ClampedArray]",dt="[object Uint16Array]",_t="[object Uint32Array]",mt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,bt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,kt=/[&<>"']/g,Ot=RegExp(wt.source),xt=RegExp(kt.source),jt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,St=/^\./,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,It=/[\\^$.*+?()[\]{}|]/g,At=RegExp(It.source),Rt=/^\s+|\s+$/g,Vt=/^\s+/,Lt=/\s+$/,Nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ft=/\{\n\/\* \[wrapped with (.+)\] \*/,Dt=/,? & /,zt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wt=/\\(\\)?/g,Bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,Ut=/^[-+]0x[0-9a-f]+$/i,qt=/^0b[01]+$/i,Zt=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Gt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ht=/($^)/,Jt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",en="["+Qt+"]",tn="["+Kt+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+Qt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",un="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ln="(?:"+nn+"|"+rn+")",cn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",un,an].join("|")+")[\\ufe0e\\ufe0f]?"+cn+")*",hn="[\\ufe0e\\ufe0f]?"+cn+fn,pn="(?:"+["[\\u2700-\\u27bf]",un,an].join("|")+")"+hn,vn="(?:"+["[^\\ud800-\\udfff]"+tn+"?",tn,un,an,"[\\ud800-\\udfff]"].join("|")+")",yn=RegExp("['’]","g"),dn=RegExp(tn,"g"),_n=RegExp(on+"(?="+on+")|"+vn+hn,"g"),mn=RegExp([sn+"?"+nn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[en,sn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[en,sn+ln,"$"].join("|")+")",sn+"?"+ln+"+(?:['’](?:d|ll|m|re|s|t|ve))?",sn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",pn].join("|"),"g"),gn=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),bn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kn=-1,On={};On[lt]=On[ct]=On[ft]=On[ht]=On[pt]=On[vt]=On[yt]=On[dt]=On[_t]=!0,On[ze]=On[We]=On[at]=On[Ye]=On[st]=On[Ue]=On[Ze]=On[$e]=On[Xe]=On[He]=On[Ke]=On[et]=On[tt]=On[nt]=On[ot]=!1;var xn={};xn[ze]=xn[We]=xn[at]=xn[st]=xn[Ye]=xn[Ue]=xn[lt]=xn[ct]=xn[ft]=xn[ht]=xn[pt]=xn[Xe]=xn[He]=xn[Ke]=xn[et]=xn[tt]=xn[nt]=xn[rt]=xn[vt]=xn[yt]=xn[dt]=xn[_t]=!0,xn[Ze]=xn[$e]=xn[ot]=!1;var jn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},En={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tn=parseFloat,Sn=parseInt,Mn="object"==typeof e&&e&&e.Object===Object&&e,In="object"==typeof self&&self&&self.Object===Object&&self,An=Mn||In||Function("return this")(),Rn="object"==typeof t&&t&&!t.nodeType&&t,Vn=Rn&&"object"==typeof r&&r&&!r.nodeType&&r,Ln=Vn&&Vn.exports===Rn,Nn=Ln&&Mn.process,Fn=function(){try{return Nn&&Nn.binding&&Nn.binding("util")}catch(e){}}(),Dn=Fn&&Fn.isArrayBuffer,zn=Fn&&Fn.isDate,Wn=Fn&&Fn.isMap,Bn=Fn&&Fn.isRegExp,Yn=Fn&&Fn.isSet,Un=Fn&&Fn.isTypedArray,qn=C("length"),Zn=T(jn),$n=T(En),Gn=T(Pn),Xn=function e(t){function n(e){if(os(e)&&!_h(e)&&!(e instanceof b)){if(e instanceof i)return e;if(dc.call(e,"__wrapped__"))return nu(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ie}function b(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Le,this.__views__=[]}function T(){var e=new b(this.__wrapped__);return e.__actions__=Ni(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ni(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ni(this.__views__),e}function J(){if(this.__filtered__){var e=new b(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function te(){var e=this.__wrapped__.value(),t=this.__dir__,n=_h(e),r=t<0,i=n?e.length:0,o=Po(0,i,this.__views__),u=o.start,a=o.end,s=a-u,l=r?a:u-1,c=this.__iteratees__,f=c.length,h=0,p=Zc(s,this.__takeCount__);if(!n||!r&&i==s&&p==s)return mi(e,this.__actions__);var v=[];e:for(;s--&&h<p;){l+=t;for(var y=-1,d=e[l];++y<f;){var _=c[y],m=_.iteratee,g=_.type,b=m(d);if(g==Me)d=b;else if(!b){if(g==Se)continue e;break e}}v[h++]=d}return v}function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zt(){this.__data__=nf?nf(null):{},this.size=0}function Kt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Qt(e){var t=this.__data__;if(nf){var n=t[e];return n===se?ie:n}return dc.call(t,e)?t[e]:ie}function en(e){var t=this.__data__;return nf?t[e]!==ie:dc.call(t,e)}function tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nf&&t===ie?se:t,this}function nn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rn(){this.__data__=[],this.size=0}function on(e){var t=this.__data__,n=Hn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Sc.call(t,n,1),--this.size,!0)}function un(e){var t=this.__data__,n=Hn(t,e);return n<0?ie:t[n][1]}function an(e){return Hn(this.__data__,e)>-1}function sn(e,t){var n=this.__data__,r=Hn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ln(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function cn(){this.size=0,this.__data__={hash:new ne,map:new(Kc||nn),string:new ne}}function fn(e){var t=Oo(this,e).delete(e);return this.size-=t?1:0,t}function hn(e){return Oo(this,e).get(e)}function pn(e){return Oo(this,e).has(e)}function vn(e,t){var n=Oo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function _n(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ln;++t<n;)this.add(e[t])}function mn(e){return this.__data__.set(e,se),this}function gn(e){return this.__data__.has(e)}function bn(e){var t=this.__data__=new nn(e);this.size=t.size}function jn(){this.__data__=new nn,this.size=0}function En(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Pn(e){return this.__data__.get(e)}function Cn(e){return this.__data__.has(e)}function Mn(e,t){var n=this.__data__;if(n instanceof nn){var r=n.__data__;if(!Kc||r.length<oe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ln(r)}return n.set(e,t),this.size=n.size,this}function In(e,t){var n=_h(e),r=!n&&dh(e),i=!n&&!r&&gh(e),o=!n&&!r&&!i&&xh(e),u=n||r||i||o,a=u?A(e.length,lc):[],s=a.length;for(var l in e)!t&&!dc.call(e,l)||u&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Vo(l,s))||a.push(l);return a}function Rn(e){var t=e.length;return t?e[Qr(0,t-1)]:ie}function Vn(e,t){return Ko(Ni(e),nr(t,0,e.length))}function Nn(e){return Ko(Ni(e))}function Fn(e,t,n){(n===ie||qa(e[t],n))&&(n!==ie||t in e)||er(e,t,n)}function qn(e,t,n){var r=e[t];dc.call(e,t)&&qa(r,n)&&(n!==ie||t in e)||er(e,t,n)}function Hn(e,t){for(var n=e.length;n--;)if(qa(e[n][0],t))return n;return-1}function Jn(e,t,n,r){return yf(e,function(e,i,o){t(r,e,n(e),o)}),r}function Kn(e,t){return e&&Fi(t,zs(t),e)}function Qn(e,t){return e&&Fi(t,Ws(t),e)}function er(e,t,n){"__proto__"==t&&Rc?Rc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function tr(e,t){for(var n=-1,r=t.length,i=nc(r),o=null==e;++n<r;)i[n]=o?ie:Ns(e,t[n]);return i}function nr(e,t,n){return e===e&&(n!==ie&&(e=e<=n?e:n),t!==ie&&(e=e>=t?e:t)),e}function rr(e,t,n,r,i,o){var u,a=t&fe,s=t&he,c=t&pe;if(n&&(u=i?n(e,r,i,o):n(e)),u!==ie)return u;if(!is(e))return e;var f=_h(e);if(f){if(u=So(e),!a)return Ni(e,u)}else{var h=Pf(e),p=h==$e||h==Ge;if(gh(e))return ji(e,a);if(h==Ke||h==ze||p&&!i){if(u=s||p?{}:Mo(e),!a)return s?zi(e,Qn(u,e)):Di(e,Kn(u,e))}else{if(!xn[h])return i?e:{};u=Io(e,h,rr,a)}}o||(o=new bn);var v=o.get(e);if(v)return v;o.set(e,u);var y=c?s?go:mo:s?Ws:zs,d=f?ie:y(e);return l(d||e,function(r,i){d&&(i=r,r=e[i]),qn(u,i,rr(r,t,n,i,e,o))}),u}function ir(e){var t=zs(e);return function(n){return or(n,e,t)}}function or(e,t,n){var r=n.length;if(null==e)return!r;for(e=ac(e);r--;){var i=n[r],o=t[i],u=e[i];if(u===ie&&!(i in e)||!o(u))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new cc(ae);return Sf(function(){e.apply(ie,n)},t)}function ar(e,t,n,r){var i=-1,o=p,u=!0,a=e.length,s=[],l=t.length;if(!a)return s;n&&(t=y(t,V(n))),r?(o=v,u=!1):t.length>=oe&&(o=N,u=!1,t=new _n(t));e:for(;++i<a;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,u&&f===f){for(var h=l;h--;)if(t[h]===f)continue e;s.push(c)}else o(t,f,r)||s.push(c)}return s}function sr(e,t){var n=!0;return yf(e,function(e,r,i){return n=!!t(e,r,i)}),n}function lr(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],u=t(o);if(null!=u&&(a===ie?u===u&&!ds(u):n(u,a)))var a=u,s=o}return s}function cr(e,t,n,r){var i=e.length;for(n=ks(n),n<0&&(n=-n>i?0:i+n),r=r===ie||r>i?i:ks(r),r<0&&(r+=i),r=n>r?0:Os(r);n<r;)e[n++]=t;return e}function fr(e,t){var n=[];return yf(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function hr(e,t,n,r,i){var o=-1,u=e.length;for(n||(n=Ro),i||(i=[]);++o<u;){var a=e[o];t>0&&n(a)?t>1?hr(a,t-1,n,r,i):d(i,a):r||(i[i.length]=a)}return i}function pr(e,t){return e&&_f(e,t,zs)}function vr(e,t){return e&&mf(e,t,zs)}function yr(e,t){return h(t,function(t){return ts(e[t])})}function dr(e,t){t=Oi(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Qo(t[n++])];return n&&n==r?e:ie}function _r(e,t,n){var r=t(e);return _h(e)?r:d(r,n(e))}function mr(e){return null==e?e===ie?it:Je:Ac&&Ac in ac(e)?Eo(e):Zo(e)}function gr(e,t){return e>t}function br(e,t){return null!=e&&dc.call(e,t)}function wr(e,t){return null!=e&&t in ac(e)}function kr(e,t,n){return e>=Zc(t,n)&&e<qc(t,n)}function Or(e,t,n){for(var r=n?v:p,i=e[0].length,o=e.length,u=o,a=nc(o),s=1/0,l=[];u--;){var c=e[u];u&&t&&(c=y(c,V(t))),s=Zc(c.length,s),a[u]=!n&&(t||i>=120&&c.length>=120)?new _n(u&&c):ie}c=e[0];var f=-1,h=a[0];e:for(;++f<i&&l.length<s;){var d=c[f],_=t?t(d):d;if(d=n||0!==d?d:0,!(h?N(h,_):r(l,_,n))){for(u=o;--u;){var m=a[u];if(!(m?N(m,_):r(e[u],_,n)))continue e}h&&h.push(_),l.push(d)}}return l}function xr(e,t,n,r){return pr(e,function(e,i,o){t(r,n(e),i,o)}),r}function jr(e,t,n){t=Oi(t,e),e=Go(e,t);var r=null==e?e:e[Qo(wu(t))];return null==r?ie:a(r,e,n)}function Er(e){return os(e)&&mr(e)==ze}function Pr(e){return os(e)&&mr(e)==at}function Cr(e){return os(e)&&mr(e)==Ue}function Tr(e,t,n,r,i){return e===t||(null==e||null==t||!os(e)&&!os(t)?e!==e&&t!==t:Sr(e,t,n,r,Tr,i))}function Sr(e,t,n,r,i,o){var u=_h(e),a=_h(t),s=u?We:Pf(e),l=a?We:Pf(t);s=s==ze?Ke:s,l=l==ze?Ke:l;var c=s==Ke,f=l==Ke,h=s==l;if(h&&gh(e)){if(!gh(t))return!1;u=!0,c=!1}if(h&&!c)return o||(o=new bn),u||xh(e)?po(e,t,n,r,i,o):vo(e,t,s,n,r,i,o);if(!(n&ve)){var p=c&&dc.call(e,"__wrapped__"),v=f&&dc.call(t,"__wrapped__");if(p||v){var y=p?e.value():e,d=v?t.value():t;return o||(o=new bn),i(y,d,n,r,o)}}return!!h&&(o||(o=new bn),yo(e,t,n,r,i,o))}function Mr(e){return os(e)&&Pf(e)==Xe}function Ir(e,t,n,r){var i=n.length,o=i,u=!r;if(null==e)return!o;for(e=ac(e);i--;){var a=n[i];if(u&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){a=n[i];var s=a[0],l=e[s],c=a[1];if(u&&a[2]){if(l===ie&&!(s in e))return!1}else{var f=new bn;if(r)var h=r(l,c,s,e,t,f);if(!(h===ie?Tr(c,l,ve|ye,r,f):h))return!1}}return!0}function Ar(e){return!(!is(e)||zo(e))&&(ts(e)?kc:Zt).test(eu(e))}function Rr(e){return os(e)&&mr(e)==et}function Vr(e){return os(e)&&Pf(e)==tt}function Lr(e){return os(e)&&rs(e.length)&&!!On[mr(e)]}function Nr(e){return"function"==typeof e?e:null==e?Sl:"object"==typeof e?_h(e)?Yr(e[0],e[1]):Br(e):Fl(e)}function Fr(e){if(!Wo(e))return Uc(e);var t=[];for(var n in ac(e))dc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Dr(e){if(!is(e))return qo(e);var t=Wo(e),n=[];for(var r in e)("constructor"!=r||!t&&dc.call(e,r))&&n.push(r);return n}function zr(e,t){return e<t}function Wr(e,t){var n=-1,r=Za(e)?nc(e.length):[];return yf(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Br(e){var t=xo(e);return 1==t.length&&t[0][2]?Yo(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function Yr(e,t){return No(e)&&Bo(t)?Yo(Qo(e),t):function(n){var r=Ns(n,e);return r===ie&&r===t?Ds(n,e):Tr(t,r,ve|ye)}}function Ur(e,t,n,r,i){e!==t&&_f(t,function(o,u){if(is(o))i||(i=new bn),qr(e,t,u,n,Ur,r,i);else{var a=r?r(e[u],o,u+"",e,t,i):ie;a===ie&&(a=o),Fn(e,u,a)}},Ws)}function qr(e,t,n,r,i,o,u){var a=e[n],s=t[n],l=u.get(s);if(l)return void Fn(e,n,l);var c=o?o(a,s,n+"",e,t,u):ie,f=c===ie;if(f){var h=_h(s),p=!h&&gh(s),v=!h&&!p&&xh(s);c=s,h||p||v?_h(a)?c=a:$a(a)?c=Ni(a):p?(f=!1,c=ji(s,!0)):v?(f=!1,c=Ii(s,!0)):c=[]:ps(s)||dh(s)?(c=a,dh(a)?c=js(a):(!is(a)||r&&ts(a))&&(c=Mo(s))):f=!1}f&&(u.set(s,c),i(c,s,r,o,u),u.delete(s)),Fn(e,n,c)}function Zr(e,t){var n=e.length;if(n)return t+=t<0?n:0,Vo(t,n)?e[t]:ie}function $r(e,t,n){var r=-1;return t=y(t.length?t:[Sl],V(ko())),M(Wr(e,function(e,n,i){return{criteria:y(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return Ri(e,t,n)})}function Gr(e,t){return Xr(e,t,function(t,n){return Ds(e,n)})}function Xr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var u=t[r],a=dr(e,u);n(a,u)&&oi(o,Oi(u,e),a)}return o}function Hr(e){return function(t){return dr(t,e)}}function Jr(e,t,n,r){var i=r?j:x,o=-1,u=t.length,a=e;for(e===t&&(t=Ni(t)),n&&(a=y(e,V(n)));++o<u;)for(var s=0,l=t[o],c=n?n(l):l;(s=i(a,c,s,r))>-1;)a!==e&&Sc.call(a,s,1),Sc.call(e,s,1);return e}function Kr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Vo(i)?Sc.call(e,i,1):yi(e,i)}}return e}function Qr(e,t){return e+Dc(Xc()*(t-e+1))}function ei(e,t,n,r){for(var i=-1,o=qc(Fc((t-e)/(n||1)),0),u=nc(o);o--;)u[r?o:++i]=e,e+=n;return u}function ti(e,t){var n="";if(!e||t<1||t>Ae)return n;do{t%2&&(n+=e),(t=Dc(t/2))&&(e+=e)}while(t);return n}function ni(e,t){return Mf($o(e,t,Sl),e+"")}function ri(e){return Rn(Qs(e))}function ii(e,t){var n=Qs(e);return Ko(n,nr(t,0,n.length))}function oi(e,t,n,r){if(!is(e))return e;t=Oi(t,e);for(var i=-1,o=t.length,u=o-1,a=e;null!=a&&++i<o;){var s=Qo(t[i]),l=n;if(i!=u){var c=a[s];l=r?r(c,s,a):ie,l===ie&&(l=is(c)?c:Vo(t[i+1])?[]:{})}qn(a,s,l),a=a[s]}return e}function ui(e){return Ko(Qs(e))}function ai(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=nc(i);++r<i;)o[r]=e[r+t];return o}function si(e,t){var n;return yf(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function li(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Fe){for(;r<i;){var o=r+i>>>1,u=e[o];null!==u&&!ds(u)&&(n?u<=t:u<t)?r=o+1:i=o}return i}return ci(e,t,Sl,n)}function ci(e,t,n,r){t=n(t);for(var i=0,o=null==e?0:e.length,u=t!==t,a=null===t,s=ds(t),l=t===ie;i<o;){var c=Dc((i+o)/2),f=n(e[c]),h=f!==ie,p=null===f,v=f===f,y=ds(f);if(u)var d=r||v;else d=l?v&&(r||h):a?v&&h&&(r||!p):s?v&&h&&!p&&(r||!y):!p&&!y&&(r?f<=t:f<t);d?i=c+1:o=c}return Zc(o,Ne)}function fi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var u=e[n],a=t?t(u):u;if(!n||!qa(a,s)){var s=a;o[i++]=0===u?0:u}}return o}function hi(e){return"number"==typeof e?e:ds(e)?Ve:+e}function pi(e){if("string"==typeof e)return e;if(_h(e))return y(e,pi)+"";if(ds(e))return pf?pf.call(e):"";var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function vi(e,t,n){var r=-1,i=p,o=e.length,u=!0,a=[],s=a;if(n)u=!1,i=v;else if(o>=oe){var l=t?null:Of(e);if(l)return X(l);u=!1,i=N,s=new _n}else s=t?[]:a;e:for(;++r<o;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,u&&f===f){for(var h=s.length;h--;)if(s[h]===f)continue e;t&&s.push(f),a.push(c)}else i(s,f,n)||(s!==a&&s.push(f),a.push(c))}return a}function yi(e,t){return t=Oi(t,e),null==(e=Go(e,t))||delete e[Qo(wu(t))]}function di(e,t,n,r){return oi(e,t,n(dr(e,t)),r)}function _i(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ai(e,r?0:o,r?o+1:i):ai(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof b&&(n=n.value()),_(t,function(e,t){return t.func.apply(t.thisArg,d([e],t.args))},n)}function gi(e,t,n){var r=e.length;if(r<2)return r?vi(e[0]):[];for(var i=-1,o=nc(r);++i<r;)for(var u=e[i],a=-1;++a<r;)a!=i&&(o[i]=ar(o[i]||u,e[a],t,n));return vi(hr(o,1),t,n)}function bi(e,t,n){for(var r=-1,i=e.length,o=t.length,u={};++r<i;){var a=r<o?t[r]:ie;n(u,e[r],a)}return u}function wi(e){return $a(e)?e:[]}function ki(e){return"function"==typeof e?e:Sl}function Oi(e,t){return _h(e)?e:No(e,t)?[e]:If(Ps(e))}function xi(e,t,n){var r=e.length;return n=n===ie?r:n,!t&&n>=r?e:ai(e,t,n)}function ji(e,t){if(t)return e.slice();var n=e.length,r=Ec?Ec(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new jc(t).set(new jc(e)),t}function Pi(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ci(e,t,n){return _(t?n(Z(e),fe):Z(e),o,new e.constructor)}function Ti(e){var t=new e.constructor(e.source,Yt.exec(e));return t.lastIndex=e.lastIndex,t}function Si(e,t,n){return _(t?n(X(e),fe):X(e),u,new e.constructor)}function Mi(e){return hf?ac(hf.call(e)):{}}function Ii(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ai(e,t){if(e!==t){var n=e!==ie,r=null===e,i=e===e,o=ds(e),u=t!==ie,a=null===t,s=t===t,l=ds(t);if(!a&&!l&&!o&&e>t||o&&u&&s&&!a&&!l||r&&u&&s||!n&&s||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||a&&n&&i||!u&&i||!s)return-1}return 0}function Ri(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,u=i.length,a=n.length;++r<u;){var s=Ai(i[r],o[r]);if(s){if(r>=a)return s;return s*("desc"==n[r]?-1:1)}}return e.index-t.index}function Vi(e,t,n,r){for(var i=-1,o=e.length,u=n.length,a=-1,s=t.length,l=qc(o-u,0),c=nc(s+l),f=!r;++a<s;)c[a]=t[a];for(;++i<u;)(f||i<o)&&(c[n[i]]=e[i]);for(;l--;)c[a++]=e[i++];return c}function Li(e,t,n,r){for(var i=-1,o=e.length,u=-1,a=n.length,s=-1,l=t.length,c=qc(o-a,0),f=nc(c+l),h=!r;++i<c;)f[i]=e[i];for(var p=i;++s<l;)f[p+s]=t[s];for(;++u<a;)(h||i<o)&&(f[p+n[u]]=e[i++]);return f}function Ni(e,t){var n=-1,r=e.length;for(t||(t=nc(r));++n<r;)t[n]=e[n];return t}function Fi(e,t,n,r){var i=!n;n||(n={});for(var o=-1,u=t.length;++o<u;){var a=t[o],s=r?r(n[a],e[a],a,n,e):ie;s===ie&&(s=e[a]),i?er(n,a,s):qn(n,a,s)}return n}function Di(e,t){return Fi(e,jf(e),t)}function zi(e,t){return Fi(e,Ef(e),t)}function Wi(e,t){return function(n,r){var i=_h(n)?s:Jn,o=t?t():{};return i(n,e,ko(r,2),o)}}function Bi(e){return ni(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:ie,u=i>2?n[2]:ie;for(o=e.length>3&&"function"==typeof o?(i--,o):ie,u&&Lo(n[0],n[1],u)&&(o=i<3?ie:o,i=1),t=ac(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}function Yi(e,t){return function(n,r){if(null==n)return n;if(!Za(n))return e(n,r);for(var i=n.length,o=t?i:-1,u=ac(n);(t?o--:++o<i)&&!1!==r(u[o],o,u););return n}}function Ui(e){return function(t,n,r){for(var i=-1,o=ac(t),u=r(t),a=u.length;a--;){var s=u[e?a:++i];if(!1===n(o[s],s,o))break}return t}}function qi(e,t,n){function r(){return(this&&this!==An&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=t&de,o=Gi(e);return r}function Zi(e){return function(t){t=Ps(t);var n=Y(t)?ee(t):ie,r=n?n[0]:t.charAt(0),i=n?xi(n,1).join(""):t.slice(1);return r[e]()+i}}function $i(e){return function(t){return _(jl(ol(t).replace(yn,"")),e,"")}}function Gi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=vf(e.prototype),r=e.apply(n,t);return is(r)?r:n}}function Xi(e,t,n){function r(){for(var o=arguments.length,u=nc(o),s=o,l=wo(r);s--;)u[s]=arguments[s];var c=o<3&&u[0]!==l&&u[o-1]!==l?[]:G(u,l);return(o-=c.length)<n?uo(e,t,Ki,r.placeholder,ie,u,c,ie,ie,n-o):a(this&&this!==An&&this instanceof r?i:e,this,u)}var i=Gi(e);return r}function Hi(e){return function(t,n,r){var i=ac(t);if(!Za(t)){var o=ko(n,3);t=zs(t),n=function(e){return o(i[e],e,i)}}var u=e(t,n,r);return u>-1?i[o?t[u]:u]:ie}}function Ji(e){return _o(function(t){var n=t.length,r=n,o=i.prototype.thru;for(e&&t.reverse();r--;){var u=t[r];if("function"!=typeof u)throw new cc(ae);if(o&&!a&&"wrapper"==bo(u))var a=new i([],!0)}for(r=a?r:n;++r<n;){u=t[r];var s=bo(u),l="wrapper"==s?xf(u):ie;a=l&&Do(l[0])&&l[1]==(Oe|ge|we|xe)&&!l[4].length&&1==l[9]?a[bo(l[0])].apply(a,l[3]):1==u.length&&Do(u)?a[s]():a.thru(u)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&_h(r))return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Ki(e,t,n,r,i,o,u,a,s,l){function c(){for(var _=arguments.length,m=nc(_),g=_;g--;)m[g]=arguments[g];if(v)var b=wo(c),w=z(m,b);if(r&&(m=Vi(m,r,i,v)),o&&(m=Li(m,o,u,v)),_-=w,v&&_<l){var k=G(m,b);return uo(e,t,Ki,c.placeholder,n,m,k,a,s,l-_)}var O=h?n:this,x=p?O[e]:e;return _=m.length,a?m=Xo(m,a):y&&_>1&&m.reverse(),f&&s<_&&(m.length=s),this&&this!==An&&this instanceof c&&(x=d||Gi(x)),x.apply(O,m)}var f=t&Oe,h=t&de,p=t&_e,v=t&(ge|be),y=t&je,d=p?ie:Gi(e);return c}function Qi(e,t){return function(n,r){return xr(n,e,t(r),{})}}function eo(e,t){return function(n,r){var i;if(n===ie&&r===ie)return t;if(n!==ie&&(i=n),r!==ie){if(i===ie)return r;"string"==typeof n||"string"==typeof r?(n=pi(n),r=pi(r)):(n=hi(n),r=hi(r)),i=e(n,r)}return i}}function to(e){return _o(function(t){return t=y(t,V(ko())),ni(function(n){var r=this;return e(t,function(e){return a(e,r,n)})})})}function no(e,t){t=t===ie?" ":pi(t);var n=t.length;if(n<2)return n?ti(t,e):t;var r=ti(t,Fc(e/Q(t)));return Y(t)?xi(ee(r),0,e).join(""):r.slice(0,e)}function ro(e,t,n,r){function i(){for(var t=-1,s=arguments.length,l=-1,c=r.length,f=nc(c+s),h=this&&this!==An&&this instanceof i?u:e;++l<c;)f[l]=r[l];for(;s--;)f[l++]=arguments[++t];return a(h,o?n:this,f)}var o=t&de,u=Gi(e);return i}function io(e){return function(t,n,r){return r&&"number"!=typeof r&&Lo(t,n,r)&&(n=r=ie),t=ws(t),n===ie?(n=t,t=0):n=ws(n),r=r===ie?t<n?1:-1:ws(r),ei(t,n,r,e)}}function oo(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=xs(t),n=xs(n)),e(t,n)}}function uo(e,t,n,r,i,o,u,a,s,l){var c=t&ge,f=c?u:ie,h=c?ie:u,p=c?o:ie,v=c?ie:o;t|=c?we:ke,(t&=~(c?ke:we))&me||(t&=~(de|_e));var y=[e,t,i,p,f,v,h,a,s,l],d=n.apply(ie,y);return Do(e)&&Tf(d,y),d.placeholder=r,Ho(d,e,t)}function ao(e){var t=uc[e];return function(e,n){if(e=xs(e),n=null==n?0:Zc(ks(n),292)){var r=(Ps(e)+"e").split("e");return r=(Ps(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function so(e){return function(t){var n=Pf(t);return n==Xe?Z(t):n==tt?H(t):R(t,e(t))}}function lo(e,t,n,r,i,o,u,a){var s=t&_e;if(!s&&"function"!=typeof e)throw new cc(ae);var l=r?r.length:0;if(l||(t&=~(we|ke),r=i=ie),u=u===ie?u:qc(ks(u),0),a=a===ie?a:ks(a),l-=i?i.length:0,t&ke){var c=r,f=i;r=i=ie}var h=s?ie:xf(e),p=[e,t,n,r,i,c,f,o,u,a];if(h&&Uo(p,h),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],a=p[9]=p[9]===ie?s?0:e.length:qc(p[9]-l,0),!a&&t&(ge|be)&&(t&=~(ge|be)),t&&t!=de)v=t==ge||t==be?Xi(e,t,a):t!=we&&t!=(de|we)||i.length?Ki.apply(ie,p):ro(e,t,n,r);else var v=qi(e,t,n);return Ho((h?gf:Tf)(v,p),e,t)}function co(e,t,n,r){return e===ie||qa(e,pc[n])&&!dc.call(r,n)?t:e}function fo(e,t,n,r,i,o){return is(e)&&is(t)&&(o.set(t,e),Ur(e,t,ie,fo,o),o.delete(t)),e}function ho(e){return ps(e)?ie:e}function po(e,t,n,r,i,o){var u=n&ve,a=e.length,s=t.length;if(a!=s&&!(u&&s>a))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var c=-1,f=!0,h=n&ye?new _n:ie;for(o.set(e,t),o.set(t,e);++c<a;){var p=e[c],v=t[c];if(r)var y=u?r(v,p,c,t,e,o):r(p,v,c,e,t,o);if(y!==ie){if(y)continue;f=!1;break}if(h){if(!g(t,function(e,t){if(!N(h,t)&&(p===e||i(p,e,n,r,o)))return h.push(t)})){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function vo(e,t,n,r,i,o,u){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!o(new jc(e),new jc(t)));case Ye:case Ue:case He:return qa(+e,+t);case Ze:return e.name==t.name&&e.message==t.message;case et:case nt:return e==t+"";case Xe:var a=Z;case tt:var s=r&ve;if(a||(a=X),e.size!=t.size&&!s)return!1;var l=u.get(e);if(l)return l==t;r|=ye,u.set(e,t);var c=po(a(e),a(t),r,i,o,u);return u.delete(e),c;case rt:if(hf)return hf.call(e)==hf.call(t)}return!1}function yo(e,t,n,r,i,o){var u=n&ve,a=mo(e),s=a.length;if(s!=mo(t).length&&!u)return!1;for(var l=s;l--;){var c=a[l];if(!(u?c in t:dc.call(t,c)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var h=!0;o.set(e,t),o.set(t,e);for(var p=u;++l<s;){c=a[l];var v=e[c],y=t[c];if(r)var d=u?r(y,v,c,t,e,o):r(v,y,c,e,t,o);if(!(d===ie?v===y||i(v,y,n,r,o):d)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var _=e.constructor,m=t.constructor;_!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof m&&m instanceof m)&&(h=!1)}return o.delete(e),o.delete(t),h}function _o(e){return Mf($o(e,ie,pu),e+"")}function mo(e){return _r(e,zs,jf)}function go(e){return _r(e,Ws,Ef)}function bo(e){for(var t=e.name+"",n=of[t],r=dc.call(of,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function wo(e){return(dc.call(n,"placeholder")?n:e).placeholder}function ko(){var e=n.iteratee||Ml;return e=e===Ml?Nr:e,arguments.length?e(arguments[0],arguments[1]):e}function Oo(e,t){var n=e.__data__;return Fo(t)?n["string"==typeof t?"string":"hash"]:n.map}function xo(e){for(var t=zs(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Bo(i)]}return t}function jo(e,t){var n=B(e,t);return Ar(n)?n:ie}function Eo(e){var t=dc.call(e,Ac),n=e[Ac];try{e[Ac]=ie;var r=!0}catch(e){}var i=gc.call(e);return r&&(t?e[Ac]=n:delete e[Ac]),i}function Po(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Zc(t,e+u);break;case"takeRight":e=qc(e,t-u)}}return{start:e,end:t}}function Co(e){var t=e.match(Ft);return t?t[1].split(Dt):[]}function To(e,t,n){t=Oi(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var u=Qo(t[r]);if(!(o=null!=e&&n(e,u)))break;e=e[u]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&rs(i)&&Vo(u,i)&&(_h(e)||dh(e))}function So(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&dc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Mo(e){return"function"!=typeof e.constructor||Wo(e)?{}:vf(Pc(e))}function Io(e,t,n,r){var i=e.constructor;switch(t){case at:return Ei(e);case Ye:case Ue:return new i(+e);case st:return Pi(e,r);case lt:case ct:case ft:case ht:case pt:case vt:case yt:case dt:case _t:return Ii(e,r);case Xe:return Ci(e,r,n);case He:case nt:return new i(e);case et:return Ti(e);case tt:return Si(e,r,n);case rt:return Mi(e)}}function Ao(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Nt,"{\n/* [wrapped with "+t+"] */\n")}function Ro(e){return _h(e)||dh(e)||!!(Mc&&e&&e[Mc])}function Vo(e,t){return!!(t=null==t?Ae:t)&&("number"==typeof e||Gt.test(e))&&e>-1&&e%1==0&&e<t}function Lo(e,t,n){if(!is(n))return!1;var r=typeof t;return!!("number"==r?Za(n)&&Vo(t,n.length):"string"==r&&t in n)&&qa(n[t],e)}function No(e,t){if(_h(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ds(e))||(Tt.test(e)||!Ct.test(e)||null!=t&&e in ac(t))}function Fo(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Do(e){var t=bo(e),r=n[t];if("function"!=typeof r||!(t in b.prototype))return!1;if(e===r)return!0;var i=xf(r);return!!i&&e===i[0]}function zo(e){return!!mc&&mc in e}function Wo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||pc)}function Bo(e){return e===e&&!is(e)}function Yo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==ie||e in ac(n)))}}function Uo(e,t){var n=e[1],r=t[1],i=n|r,o=i<(de|_e|Oe),u=r==Oe&&n==ge||r==Oe&&n==xe&&e[7].length<=t[8]||r==(Oe|xe)&&t[7].length<=t[8]&&n==ge;if(!o&&!u)return e;r&de&&(e[2]=t[2],i|=n&de?0:me);var a=t[3];if(a){var s=e[3];e[3]=s?Vi(s,a,t[4]):a,e[4]=s?G(e[3],ce):t[4]}return a=t[5],a&&(s=e[5],e[5]=s?Li(s,a,t[6]):a,e[6]=s?G(e[5],ce):t[6]),a=t[7],a&&(e[7]=a),r&Oe&&(e[8]=null==e[8]?t[8]:Zc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function qo(e){var t=[];if(null!=e)for(var n in ac(e))t.push(n);return t}function Zo(e){return gc.call(e)}function $o(e,t,n){return t=qc(t===ie?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=qc(r.length-t,0),u=nc(o);++i<o;)u[i]=r[t+i];i=-1;for(var s=nc(t+1);++i<t;)s[i]=r[i];return s[t]=n(u),a(e,this,s)}}function Go(e,t){return t.length<2?e:dr(e,ai(t,0,-1))}function Xo(e,t){for(var n=e.length,r=Zc(t.length,n),i=Ni(e);r--;){var o=t[r];e[r]=Vo(o,n)?i[o]:ie}return e}function Ho(e,t,n){var r=t+"";return Mf(e,Ao(r,tu(Co(r),n)))}function Jo(e){var t=0,n=0;return function(){var r=$c(),i=Te-(r-n);if(n=r,i>0){if(++t>=Ce)return arguments[0]}else t=0;return e.apply(ie,arguments)}}function Ko(e,t){var n=-1,r=e.length,i=r-1;for(t=t===ie?r:t;++n<t;){var o=Qr(n,i),u=e[o];e[o]=e[n],e[n]=u}return e.length=t,e}function Qo(e){if("string"==typeof e||ds(e))return e;var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function eu(e){if(null!=e){try{return yc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function tu(e,t){return l(De,function(n){var r="_."+n[0];t&n[1]&&!p(e,r)&&e.push(r)}),e.sort()}function nu(e){if(e instanceof b)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=Ni(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function ru(e,t,n){t=(n?Lo(e,t,n):t===ie)?1:qc(ks(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,o=0,u=nc(Fc(r/t));i<r;)u[o++]=ai(e,i,i+=t);return u}function iu(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function ou(){var e=arguments.length;if(!e)return[];for(var t=nc(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return d(_h(n)?Ni(n):[n],hr(t,1))}function uu(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:ks(t),ai(e,t<0?0:t,r)):[]}function au(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:ks(t),t=r-t,ai(e,0,t<0?0:t)):[]}function su(e,t){return e&&e.length?_i(e,ko(t,3),!0,!0):[]}function lu(e,t){return e&&e.length?_i(e,ko(t,3),!0):[]}function cu(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Lo(e,t,n)&&(n=0,r=i),cr(e,t,n,r)):[]}function fu(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ks(n);return i<0&&(i=qc(r+i,0)),O(e,ko(t,3),i)}function hu(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==ie&&(i=ks(n),i=n<0?qc(r+i,0):Zc(i,r-1)),O(e,ko(t,3),i,!0)}function pu(e){return(null==e?0:e.length)?hr(e,1):[]}function vu(e){return(null==e?0:e.length)?hr(e,Ie):[]}function yu(e,t){return(null==e?0:e.length)?(t=t===ie?1:ks(t),hr(e,t)):[]}function du(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function _u(e){return e&&e.length?e[0]:ie}function mu(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ks(n);return i<0&&(i=qc(r+i,0)),x(e,t,i)}function gu(e){return(null==e?0:e.length)?ai(e,0,-1):[]}function bu(e,t){return null==e?"":Yc.call(e,t)}function wu(e){var t=null==e?0:e.length;return t?e[t-1]:ie}function ku(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==ie&&(i=ks(n),i=i<0?qc(r+i,0):Zc(i,r-1)),t===t?K(e,t,i):O(e,E,i,!0)}function Ou(e,t){return e&&e.length?Zr(e,ks(t)):ie}function xu(e,t){return e&&e.length&&t&&t.length?Jr(e,t):e}function ju(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,ko(n,2)):e}function Eu(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,ie,n):e}function Pu(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=ko(t,3);++r<o;){var u=e[r];t(u,r,e)&&(n.push(u),i.push(r))}return Kr(e,i),n}function Cu(e){return null==e?e:Hc.call(e)}function Tu(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Lo(e,t,n)?(t=0,n=r):(t=null==t?0:ks(t),n=n===ie?r:ks(n)),ai(e,t,n)):[]}function Su(e,t){return li(e,t)}function Mu(e,t,n){return ci(e,t,ko(n,2))}function Iu(e,t){var n=null==e?0:e.length;if(n){var r=li(e,t);if(r<n&&qa(e[r],t))return r}return-1}function Au(e,t){return li(e,t,!0)}function Ru(e,t,n){return ci(e,t,ko(n,2),!0)}function Vu(e,t){if(null==e?0:e.length){var n=li(e,t,!0)-1;if(qa(e[n],t))return n}return-1}function Lu(e){return e&&e.length?fi(e):[]}function Nu(e,t){return e&&e.length?fi(e,ko(t,2)):[]}function Fu(e){var t=null==e?0:e.length;return t?ai(e,1,t):[]}function Du(e,t,n){return e&&e.length?(t=n||t===ie?1:ks(t),ai(e,0,t<0?0:t)):[]}function zu(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===ie?1:ks(t),t=r-t,ai(e,t<0?0:t,r)):[]}function Wu(e,t){return e&&e.length?_i(e,ko(t,3),!1,!0):[]}function Bu(e,t){return e&&e.length?_i(e,ko(t,3)):[]}function Yu(e){return e&&e.length?vi(e):[]}function Uu(e,t){return e&&e.length?vi(e,ko(t,2)):[]}function qu(e,t){return t="function"==typeof t?t:ie,e&&e.length?vi(e,ie,t):[]}function Zu(e){if(!e||!e.length)return[];var t=0;return e=h(e,function(e){if($a(e))return t=qc(e.length,t),!0}),A(t,function(t){return y(e,C(t))})}function $u(e,t){if(!e||!e.length)return[];var n=Zu(e);return null==t?n:y(n,function(e){return a(t,ie,e)})}function Gu(e,t){return bi(e||[],t||[],qn)}function Xu(e,t){return bi(e||[],t||[],oi)}function Hu(e){var t=n(e);return t.__chain__=!0,t}function Ju(e,t){return t(e),e}function Ku(e,t){return t(e)}function Qu(){return Hu(this)}function ea(){return new i(this.value(),this.__chain__)}function ta(){this.__values__===ie&&(this.__values__=bs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ie:this.__values__[this.__index__++]}}function na(){return this}function ra(e){for(var t,n=this;n instanceof r;){var i=nu(n);i.__index__=0,i.__values__=ie,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function ia(){var e=this.__wrapped__;if(e instanceof b){var t=e;return this.__actions__.length&&(t=new b(this)),t=t.reverse(),t.__actions__.push({func:Ku,args:[Cu],thisArg:ie}),new i(t,this.__chain__)}return this.thru(Cu)}function oa(){return mi(this.__wrapped__,this.__actions__)}function ua(e,t,n){var r=_h(e)?f:sr;return n&&Lo(e,t,n)&&(t=ie),r(e,ko(t,3))}function aa(e,t){return(_h(e)?h:fr)(e,ko(t,3))}function sa(e,t){return hr(va(e,t),1)}function la(e,t){return hr(va(e,t),Ie)}function ca(e,t,n){return n=n===ie?1:ks(n),hr(va(e,t),n)}function fa(e,t){return(_h(e)?l:yf)(e,ko(t,3))}function ha(e,t){return(_h(e)?c:df)(e,ko(t,3))}function pa(e,t,n,r){e=Za(e)?e:Qs(e),n=n&&!r?ks(n):0;var i=e.length;return n<0&&(n=qc(i+n,0)),ys(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&x(e,t,n)>-1}function va(e,t){return(_h(e)?y:Wr)(e,ko(t,3))}function ya(e,t,n,r){return null==e?[]:(_h(t)||(t=null==t?[]:[t]),n=r?ie:n,_h(n)||(n=null==n?[]:[n]),$r(e,t,n))}function da(e,t,n){var r=_h(e)?_:S,i=arguments.length<3;return r(e,ko(t,4),n,i,yf)}function _a(e,t,n){var r=_h(e)?m:S,i=arguments.length<3;return r(e,ko(t,4),n,i,df)}function ma(e,t){return(_h(e)?h:fr)(e,Ia(ko(t,3)))}function ga(e){return(_h(e)?Rn:ri)(e)}function ba(e,t,n){return t=(n?Lo(e,t,n):t===ie)?1:ks(t),(_h(e)?Vn:ii)(e,t)}function wa(e){return(_h(e)?Nn:ui)(e)}function ka(e){if(null==e)return 0;if(Za(e))return ys(e)?Q(e):e.length;var t=Pf(e);return t==Xe||t==tt?e.size:Fr(e).length}function Oa(e,t,n){var r=_h(e)?g:si;return n&&Lo(e,t,n)&&(t=ie),r(e,ko(t,3))}function xa(e,t){if("function"!=typeof t)throw new cc(ae);return e=ks(e),function(){if(--e<1)return t.apply(this,arguments)}}function ja(e,t,n){return t=n?ie:t,t=e&&null==t?e.length:t,lo(e,Oe,ie,ie,ie,ie,t)}function Ea(e,t){var n;if("function"!=typeof t)throw new cc(ae);return e=ks(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=ie),n}}function Pa(e,t,n){t=n?ie:t;var r=lo(e,ge,ie,ie,ie,ie,ie,t);return r.placeholder=Pa.placeholder,r}function Ca(e,t,n){t=n?ie:t;var r=lo(e,be,ie,ie,ie,ie,ie,t);return r.placeholder=Ca.placeholder,r}function Ta(e,t,n){function r(t){var n=h,r=p;return h=p=ie,m=t,y=e.apply(r,n)}function i(e){return m=e,d=Sf(a,t),g?r(e):y}function o(e){var n=e-_,r=e-m,i=t-n;return b?Zc(i,v-r):i}function u(e){var n=e-_,r=e-m;return _===ie||n>=t||n<0||b&&r>=v}function a(){var e=oh();if(u(e))return s(e);d=Sf(a,o(e))}function s(e){return d=ie,w&&h?r(e):(h=p=ie,y)}function l(){d!==ie&&kf(d),m=0,h=_=p=d=ie}function c(){return d===ie?y:s(oh())}function f(){var e=oh(),n=u(e);if(h=arguments,p=this,_=e,n){if(d===ie)return i(_);if(b)return d=Sf(a,t),r(_)}return d===ie&&(d=Sf(a,t)),y}var h,p,v,y,d,_,m=0,g=!1,b=!1,w=!0;if("function"!=typeof e)throw new cc(ae);return t=xs(t)||0,is(n)&&(g=!!n.leading,b="maxWait"in n,v=b?qc(xs(n.maxWait)||0,t):v,w="trailing"in n?!!n.trailing:w),f.cancel=l,f.flush=c,f}function Sa(e){return lo(e,je)}function Ma(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new cc(ae);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=e.apply(this,r);return n.cache=o.set(i,u)||o,u};return n.cache=new(Ma.Cache||ln),n}function Ia(e){if("function"!=typeof e)throw new cc(ae);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Aa(e){return Ea(2,e)}function Ra(e,t){if("function"!=typeof e)throw new cc(ae);return t=t===ie?t:ks(t),ni(e,t)}function Va(e,t){if("function"!=typeof e)throw new cc(ae);return t=null==t?0:qc(ks(t),0),ni(function(n){var r=n[t],i=xi(n,0,t);return r&&d(i,r),a(e,this,i)})}function La(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new cc(ae);return is(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ta(e,t,{leading:r,maxWait:t,trailing:i})}function Na(e){return ja(e,1)}function Fa(e,t){return fh(ki(t),e)}function Da(){if(!arguments.length)return[];var e=arguments[0];return _h(e)?e:[e]}function za(e){return rr(e,pe)}function Wa(e,t){return t="function"==typeof t?t:ie,rr(e,pe,t)}function Ba(e){return rr(e,fe|pe)}function Ya(e,t){return t="function"==typeof t?t:ie,rr(e,fe|pe,t)}function Ua(e,t){return null==t||or(e,t,zs(t))}function qa(e,t){return e===t||e!==e&&t!==t}function Za(e){return null!=e&&rs(e.length)&&!ts(e)}function $a(e){return os(e)&&Za(e)}function Ga(e){return!0===e||!1===e||os(e)&&mr(e)==Ye}function Xa(e){return os(e)&&1===e.nodeType&&!ps(e)}function Ha(e){if(null==e)return!0;if(Za(e)&&(_h(e)||"string"==typeof e||"function"==typeof e.splice||gh(e)||xh(e)||dh(e)))return!e.length;var t=Pf(e);if(t==Xe||t==tt)return!e.size;if(Wo(e))return!Fr(e).length;for(var n in e)if(dc.call(e,n))return!1;return!0}function Ja(e,t){return Tr(e,t)}function Ka(e,t,n){n="function"==typeof n?n:ie;var r=n?n(e,t):ie;return r===ie?Tr(e,t,ie,n):!!r}function Qa(e){if(!os(e))return!1;var t=mr(e);return t==Ze||t==qe||"string"==typeof e.message&&"string"==typeof e.name&&!ps(e)}function es(e){return"number"==typeof e&&Bc(e)}function ts(e){if(!is(e))return!1;var t=mr(e);return t==$e||t==Ge||t==Be||t==Qe}function ns(e){return"number"==typeof e&&e==ks(e)}function rs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ae}function is(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function os(e){return null!=e&&"object"==typeof e}function us(e,t){return e===t||Ir(e,t,xo(t))}function as(e,t,n){return n="function"==typeof n?n:ie,Ir(e,t,xo(t),n)}function ss(e){return hs(e)&&e!=+e}function ls(e){if(Cf(e))throw new ic(ue);return Ar(e)}function cs(e){return null===e}function fs(e){return null==e}function hs(e){return"number"==typeof e||os(e)&&mr(e)==He}function ps(e){if(!os(e)||mr(e)!=Ke)return!1;var t=Pc(e);if(null===t)return!0;var n=dc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&yc.call(n)==bc}function vs(e){return ns(e)&&e>=-Ae&&e<=Ae}function ys(e){return"string"==typeof e||!_h(e)&&os(e)&&mr(e)==nt}function ds(e){return"symbol"==typeof e||os(e)&&mr(e)==rt}function _s(e){return e===ie}function ms(e){return os(e)&&Pf(e)==ot}function gs(e){return os(e)&&mr(e)==ut}function bs(e){if(!e)return[];if(Za(e))return ys(e)?ee(e):Ni(e);if(Ic&&e[Ic])return q(e[Ic]());var t=Pf(e);return(t==Xe?Z:t==tt?X:Qs)(e)}function ws(e){if(!e)return 0===e?e:0;if((e=xs(e))===Ie||e===-Ie){return(e<0?-1:1)*Re}return e===e?e:0}function ks(e){var t=ws(e),n=t%1;return t===t?n?t-n:t:0}function Os(e){return e?nr(ks(e),0,Le):0}function xs(e){if("number"==typeof e)return e;if(ds(e))return Ve;if(is(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=is(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Rt,"");var n=qt.test(e);return n||$t.test(e)?Sn(e.slice(2),n?2:8):Ut.test(e)?Ve:+e}function js(e){return Fi(e,Ws(e))}function Es(e){return e?nr(ks(e),-Ae,Ae):0===e?e:0}function Ps(e){return null==e?"":pi(e)}function Cs(e,t){var n=vf(e);return null==t?n:Kn(n,t)}function Ts(e,t){return k(e,ko(t,3),pr)}function Ss(e,t){return k(e,ko(t,3),vr)}function Ms(e,t){return null==e?e:_f(e,ko(t,3),Ws)}function Is(e,t){return null==e?e:mf(e,ko(t,3),Ws)}function As(e,t){return e&&pr(e,ko(t,3))}function Rs(e,t){return e&&vr(e,ko(t,3))}function Vs(e){return null==e?[]:yr(e,zs(e))}function Ls(e){return null==e?[]:yr(e,Ws(e))}function Ns(e,t,n){var r=null==e?ie:dr(e,t);return r===ie?n:r}function Fs(e,t){return null!=e&&To(e,t,br)}function Ds(e,t){return null!=e&&To(e,t,wr)}function zs(e){return Za(e)?In(e):Fr(e)}function Ws(e){return Za(e)?In(e,!0):Dr(e)}function Bs(e,t){var n={};return t=ko(t,3),pr(e,function(e,r,i){er(n,t(e,r,i),e)}),n}function Ys(e,t){var n={};return t=ko(t,3),pr(e,function(e,r,i){er(n,r,t(e,r,i))}),n}function Us(e,t){return qs(e,Ia(ko(t)))}function qs(e,t){if(null==e)return{};var n=y(go(e),function(e){return[e]});return t=ko(t),Xr(e,n,function(e,n){return t(e,n[0])})}function Zs(e,t,n){t=Oi(t,e);var r=-1,i=t.length;for(i||(i=1,e=ie);++r<i;){var o=null==e?ie:e[Qo(t[r])];o===ie&&(r=i,o=n),e=ts(o)?o.call(e):o}return e}function $s(e,t,n){return null==e?e:oi(e,t,n)}function Gs(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:oi(e,t,n,r)}function Xs(e,t,n){var r=_h(e),i=r||gh(e)||xh(e);if(t=ko(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:is(e)&&ts(o)?vf(Pc(e)):{}}return(i?l:pr)(e,function(e,r,i){return t(n,e,r,i)}),n}function Hs(e,t){return null==e||yi(e,t)}function Js(e,t,n){return null==e?e:di(e,t,ki(n))}function Ks(e,t,n,r){return r="function"==typeof r?r:ie,null==e?e:di(e,t,ki(n),r)}function Qs(e){return null==e?[]:L(e,zs(e))}function el(e){return null==e?[]:L(e,Ws(e))}function tl(e,t,n){return n===ie&&(n=t,t=ie),n!==ie&&(n=xs(n),n=n===n?n:0),t!==ie&&(t=xs(t),t=t===t?t:0),nr(xs(e),t,n)}function nl(e,t,n){return t=ws(t),n===ie?(n=t,t=0):n=ws(n),e=xs(e),kr(e,t,n)}function rl(e,t,n){if(n&&"boolean"!=typeof n&&Lo(e,t,n)&&(t=n=ie),n===ie&&("boolean"==typeof t?(n=t,t=ie):"boolean"==typeof e&&(n=e,e=ie)),e===ie&&t===ie?(e=0,t=1):(e=ws(e),t===ie?(t=e,e=0):t=ws(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Xc();return Zc(e+i*(t-e+Tn("1e-"+((i+"").length-1))),t)}return Qr(e,t)}function il(e){return Hh(Ps(e).toLowerCase())}function ol(e){return(e=Ps(e))&&e.replace(Xt,Zn).replace(dn,"")}function ul(e,t,n){e=Ps(e),t=pi(t);var r=e.length;n=n===ie?r:nr(ks(n),0,r);var i=n;return(n-=t.length)>=0&&e.slice(n,i)==t}function al(e){return e=Ps(e),e&&xt.test(e)?e.replace(kt,$n):e}function sl(e){return e=Ps(e),e&&At.test(e)?e.replace(It,"\\$&"):e}function ll(e,t,n){e=Ps(e),t=ks(t);var r=t?Q(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return no(Dc(i),n)+e+no(Fc(i),n)}function cl(e,t,n){e=Ps(e),t=ks(t);var r=t?Q(e):0;return t&&r<t?e+no(t-r,n):e}function fl(e,t,n){e=Ps(e),t=ks(t);var r=t?Q(e):0;return t&&r<t?no(t-r,n)+e:e}function hl(e,t,n){return n||null==t?t=0:t&&(t=+t),Gc(Ps(e).replace(Vt,""),t||0)}function pl(e,t,n){return t=(n?Lo(e,t,n):t===ie)?1:ks(t),ti(Ps(e),t)}function vl(){var e=arguments,t=Ps(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function yl(e,t,n){return n&&"number"!=typeof n&&Lo(e,t,n)&&(t=n=ie),(n=n===ie?Le:n>>>0)?(e=Ps(e),e&&("string"==typeof t||null!=t&&!kh(t))&&!(t=pi(t))&&Y(e)?xi(ee(e),0,n):e.split(t,n)):[]}function dl(e,t,n){return e=Ps(e),n=null==n?0:nr(ks(n),0,e.length),t=pi(t),e.slice(n,n+t.length)==t}function _l(e,t,r){var i=n.templateSettings;r&&Lo(e,t,r)&&(t=ie),e=Ps(e),t=Th({},t,i,co);var o,u,a=Th({},t.imports,i.imports,co),s=zs(a),l=L(a,s),c=0,f=t.interpolate||Ht,h="__p += '",p=sc((t.escape||Ht).source+"|"+f.source+"|"+(f===Pt?Bt:Ht).source+"|"+(t.evaluate||Ht).source+"|$","g"),v="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++kn+"]")+"\n";e.replace(p,function(t,n,r,i,a,s){return r||(r=i),h+=e.slice(c,s).replace(Jt,W),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(u=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+t.length,t}),h+="';\n";var y=t.variable;y||(h="with (obj) {\n"+h+"\n}\n"),h=(u?h.replace(mt,""):h).replace(gt,"$1").replace(bt,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var d=Jh(function(){return oc(s,v+"return "+h).apply(ie,l)});if(d.source=h,Qa(d))throw d;return d}function ml(e){return Ps(e).toLowerCase()}function gl(e){return Ps(e).toUpperCase()}function bl(e,t,n){if((e=Ps(e))&&(n||t===ie))return e.replace(Rt,"");if(!e||!(t=pi(t)))return e;var r=ee(e),i=ee(t);return xi(r,F(r,i),D(r,i)+1).join("")}function wl(e,t,n){if((e=Ps(e))&&(n||t===ie))return e.replace(Lt,"");if(!e||!(t=pi(t)))return e;var r=ee(e);return xi(r,0,D(r,ee(t))+1).join("")}function kl(e,t,n){if((e=Ps(e))&&(n||t===ie))return e.replace(Vt,"");if(!e||!(t=pi(t)))return e;var r=ee(e);return xi(r,F(r,ee(t))).join("")}function Ol(e,t){var n=Ee,r=Pe;if(is(t)){var i="separator"in t?t.separator:i;n="length"in t?ks(t.length):n,r="omission"in t?pi(t.omission):r}e=Ps(e);var o=e.length;if(Y(e)){var u=ee(e);o=u.length}if(n>=o)return e;var a=n-Q(r);if(a<1)return r;var s=u?xi(u,0,a).join(""):e.slice(0,a);if(i===ie)return s+r;if(u&&(a+=s.length-a),kh(i)){if(e.slice(a).search(i)){var l,c=s;for(i.global||(i=sc(i.source,Ps(Yt.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var f=l.index;s=s.slice(0,f===ie?a:f)}}else if(e.indexOf(pi(i),a)!=a){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+r}function xl(e){return e=Ps(e),e&&Ot.test(e)?e.replace(wt,Gn):e}function jl(e,t,n){return e=Ps(e),t=n?ie:t,t===ie?U(e)?re(e):w(e):e.match(t)||[]}function El(e){var t=null==e?0:e.length,n=ko();return e=t?y(e,function(e){if("function"!=typeof e[1])throw new cc(ae);return[n(e[0]),e[1]]}):[],ni(function(n){for(var r=-1;++r<t;){var i=e[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function Pl(e){return ir(rr(e,fe))}function Cl(e){return function(){return e}}function Tl(e,t){return null==e||e!==e?t:e}function Sl(e){return e}function Ml(e){return Nr("function"==typeof e?e:rr(e,fe))}function Il(e){return Br(rr(e,fe))}function Al(e,t){return Yr(e,rr(t,fe))}function Rl(e,t,n){var r=zs(t),i=yr(t,r);null!=n||is(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=yr(t,zs(t)));var o=!(is(n)&&"chain"in n&&!n.chain),u=ts(e);return l(i,function(n){var r=t[n];e[n]=r,u&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ni(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,d([this.value()],arguments))})}),e}function Vl(){return An._===this&&(An._=wc),this}function Ll(){}function Nl(e){return e=ks(e),ni(function(t){return Zr(t,e)})}function Fl(e){return No(e)?C(Qo(e)):Hr(e)}function Dl(e){return function(t){return null==e?ie:dr(e,t)}}function zl(){return[]}function Wl(){return!1}function Bl(){return{}}function Yl(){return""}function Ul(){return!0}function ql(e,t){if((e=ks(e))<1||e>Ae)return[];var n=Le,r=Zc(e,Le);t=ko(t),e-=Le;for(var i=A(r,t);++n<e;)t(n);return i}function Zl(e){return _h(e)?y(e,Qo):ds(e)?[e]:Ni(If(Ps(e)))}function $l(e){var t=++_c;return Ps(e)+t}function Gl(e){return e&&e.length?lr(e,Sl,gr):ie}function Xl(e,t){return e&&e.length?lr(e,ko(t,2),gr):ie}function Hl(e){return P(e,Sl)}function Jl(e,t){return P(e,ko(t,2))}function Kl(e){return e&&e.length?lr(e,Sl,zr):ie}function Ql(e,t){return e&&e.length?lr(e,ko(t,2),zr):ie}function ec(e){return e&&e.length?I(e,Sl):0}function tc(e,t){return e&&e.length?I(e,ko(t,2)):0}t=null==t?An:Xn.defaults(An.Object(),t,Xn.pick(An,wn));var nc=t.Array,rc=t.Date,ic=t.Error,oc=t.Function,uc=t.Math,ac=t.Object,sc=t.RegExp,lc=t.String,cc=t.TypeError,fc=nc.prototype,hc=oc.prototype,pc=ac.prototype,vc=t["__core-js_shared__"],yc=hc.toString,dc=pc.hasOwnProperty,_c=0,mc=function(){var e=/[^.]+$/.exec(vc&&vc.keys&&vc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),gc=pc.toString,bc=yc.call(ac),wc=An._,kc=sc("^"+yc.call(dc).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oc=Ln?t.Buffer:ie,xc=t.Symbol,jc=t.Uint8Array,Ec=Oc?Oc.allocUnsafe:ie,Pc=$(ac.getPrototypeOf,ac),Cc=ac.create,Tc=pc.propertyIsEnumerable,Sc=fc.splice,Mc=xc?xc.isConcatSpreadable:ie,Ic=xc?xc.iterator:ie,Ac=xc?xc.toStringTag:ie,Rc=function(){try{var e=jo(ac,"defineProperty");return e({},"",{}),e}catch(e){}}(),Vc=t.clearTimeout!==An.clearTimeout&&t.clearTimeout,Lc=rc&&rc.now!==An.Date.now&&rc.now,Nc=t.setTimeout!==An.setTimeout&&t.setTimeout,Fc=uc.ceil,Dc=uc.floor,zc=ac.getOwnPropertySymbols,Wc=Oc?Oc.isBuffer:ie,Bc=t.isFinite,Yc=fc.join,Uc=$(ac.keys,ac),qc=uc.max,Zc=uc.min,$c=rc.now,Gc=t.parseInt,Xc=uc.random,Hc=fc.reverse,Jc=jo(t,"DataView"),Kc=jo(t,"Map"),Qc=jo(t,"Promise"),ef=jo(t,"Set"),tf=jo(t,"WeakMap"),nf=jo(ac,"create"),rf=tf&&new tf,of={},uf=eu(Jc),af=eu(Kc),sf=eu(Qc),lf=eu(ef),cf=eu(tf),ff=xc?xc.prototype:ie,hf=ff?ff.valueOf:ie,pf=ff?ff.toString:ie,vf=function(){function e(){}return function(t){if(!is(t))return{};if(Cc)return Cc(t);e.prototype=t;var n=new e;return e.prototype=ie,n}}();n.templateSettings={escape:jt,evaluate:Et,interpolate:Pt,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=vf(r.prototype),i.prototype.constructor=i,b.prototype=vf(r.prototype),b.prototype.constructor=b,ne.prototype.clear=zt,ne.prototype.delete=Kt,ne.prototype.get=Qt,ne.prototype.has=en,ne.prototype.set=tn,nn.prototype.clear=rn,nn.prototype.delete=on,nn.prototype.get=un,nn.prototype.has=an,nn.prototype.set=sn,ln.prototype.clear=cn,ln.prototype.delete=fn,ln.prototype.get=hn,ln.prototype.has=pn,ln.prototype.set=vn,_n.prototype.add=_n.prototype.push=mn,_n.prototype.has=gn,bn.prototype.clear=jn,bn.prototype.delete=En,bn.prototype.get=Pn,bn.prototype.has=Cn,bn.prototype.set=Mn;var yf=Yi(pr),df=Yi(vr,!0),_f=Ui(),mf=Ui(!0),gf=rf?function(e,t){return rf.set(e,t),e}:Sl,bf=Rc?function(e,t){return Rc(e,"toString",{configurable:!0,enumerable:!1,value:Cl(t),writable:!0})}:Sl,wf=ni,kf=Vc||function(e){return An.clearTimeout(e)},Of=ef&&1/X(new ef([,-0]))[1]==Ie?function(e){return new ef(e)}:Ll,xf=rf?function(e){return rf.get(e)}:Ll,jf=zc?function(e){return null==e?[]:(e=ac(e),h(zc(e),function(t){return Tc.call(e,t)}))}:zl,Ef=zc?function(e){for(var t=[];e;)d(t,jf(e)),e=Pc(e);return t}:zl,Pf=mr;(Jc&&Pf(new Jc(new ArrayBuffer(1)))!=st||Kc&&Pf(new Kc)!=Xe||Qc&&"[object Promise]"!=Pf(Qc.resolve())||ef&&Pf(new ef)!=tt||tf&&Pf(new tf)!=ot)&&(Pf=function(e){var t=mr(e),n=t==Ke?e.constructor:ie,r=n?eu(n):"";if(r)switch(r){case uf:return st;case af:return Xe;case sf:return"[object Promise]";case lf:return tt;case cf:return ot}return t});var Cf=vc?ts:Wl,Tf=Jo(gf),Sf=Nc||function(e,t){return An.setTimeout(e,t)},Mf=Jo(bf),If=function(e){var t=Ma(e,function(e){return n.size===le&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return St.test(e)&&t.push(""),e.replace(Mt,function(e,n,r,i){t.push(r?i.replace(Wt,"$1"):n||e)}),t}),Af=ni(function(e,t){return $a(e)?ar(e,hr(t,1,$a,!0)):[]}),Rf=ni(function(e,t){var n=wu(t);return $a(n)&&(n=ie),$a(e)?ar(e,hr(t,1,$a,!0),ko(n,2)):[]}),Vf=ni(function(e,t){var n=wu(t);return $a(n)&&(n=ie),$a(e)?ar(e,hr(t,1,$a,!0),ie,n):[]}),Lf=ni(function(e){var t=y(e,wi);return t.length&&t[0]===e[0]?Or(t):[]}),Nf=ni(function(e){var t=wu(e),n=y(e,wi);return t===wu(n)?t=ie:n.pop(),n.length&&n[0]===e[0]?Or(n,ko(t,2)):[]}),Ff=ni(function(e){var t=wu(e),n=y(e,wi);return t="function"==typeof t?t:ie,t&&n.pop(),n.length&&n[0]===e[0]?Or(n,ie,t):[]}),Df=ni(xu),zf=_o(function(e,t){var n=null==e?0:e.length,r=tr(e,t);return Kr(e,y(t,function(e){return Vo(e,n)?+e:e}).sort(Ai)),r}),Wf=ni(function(e){return vi(hr(e,1,$a,!0))}),Bf=ni(function(e){var t=wu(e);return $a(t)&&(t=ie),vi(hr(e,1,$a,!0),ko(t,2))}),Yf=ni(function(e){var t=wu(e);return t="function"==typeof t?t:ie,vi(hr(e,1,$a,!0),ie,t)}),Uf=ni(function(e,t){return $a(e)?ar(e,t):[]}),qf=ni(function(e){return gi(h(e,$a))}),Zf=ni(function(e){var t=wu(e);return $a(t)&&(t=ie),gi(h(e,$a),ko(t,2))}),$f=ni(function(e){var t=wu(e);return t="function"==typeof t?t:ie,gi(h(e,$a),ie,t)}),Gf=ni(Zu),Xf=ni(function(e){var t=e.length,n=t>1?e[t-1]:ie;return n="function"==typeof n?(e.pop(),n):ie,$u(e,n)}),Hf=_o(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return tr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof b&&Vo(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Ku,args:[o],thisArg:ie}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ie),e})):this.thru(o)}),Jf=Wi(function(e,t,n){dc.call(e,n)?++e[n]:er(e,n,1)}),Kf=Hi(fu),Qf=Hi(hu),eh=Wi(function(e,t,n){dc.call(e,n)?e[n].push(t):er(e,n,[t])}),th=ni(function(e,t,n){var r=-1,i="function"==typeof t,o=Za(e)?nc(e.length):[];return yf(e,function(e){o[++r]=i?a(t,e,n):jr(e,t,n)}),o}),nh=Wi(function(e,t,n){er(e,n,t)}),rh=Wi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ih=ni(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Lo(e,t[0],t[1])?t=[]:n>2&&Lo(t[0],t[1],t[2])&&(t=[t[0]]),$r(e,hr(t,1),[])}),oh=Lc||function(){return An.Date.now()},uh=ni(function(e,t,n){var r=de;if(n.length){var i=G(n,wo(uh));r|=we}return lo(e,r,t,n,i)}),ah=ni(function(e,t,n){var r=de|_e;if(n.length){var i=G(n,wo(ah));r|=we}return lo(t,r,e,n,i)}),sh=ni(function(e,t){return ur(e,1,t)}),lh=ni(function(e,t,n){return ur(e,xs(t)||0,n)});Ma.Cache=ln;var ch=wf(function(e,t){t=1==t.length&&_h(t[0])?y(t[0],V(ko())):y(hr(t,1),V(ko()));var n=t.length;return ni(function(r){for(var i=-1,o=Zc(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return a(e,this,r)})}),fh=ni(function(e,t){var n=G(t,wo(fh));return lo(e,we,ie,t,n)}),hh=ni(function(e,t){var n=G(t,wo(hh));return lo(e,ke,ie,t,n)}),ph=_o(function(e,t){return lo(e,xe,ie,ie,ie,t)}),vh=oo(gr),yh=oo(function(e,t){return e>=t}),dh=Er(function(){return arguments}())?Er:function(e){return os(e)&&dc.call(e,"callee")&&!Tc.call(e,"callee")},_h=nc.isArray,mh=Dn?V(Dn):Pr,gh=Wc||Wl,bh=zn?V(zn):Cr,wh=Wn?V(Wn):Mr,kh=Bn?V(Bn):Rr,Oh=Yn?V(Yn):Vr,xh=Un?V(Un):Lr,jh=oo(zr),Eh=oo(function(e,t){return e<=t}),Ph=Bi(function(e,t){if(Wo(t)||Za(t))return void Fi(t,zs(t),e);for(var n in t)dc.call(t,n)&&qn(e,n,t[n])}),Ch=Bi(function(e,t){Fi(t,Ws(t),e)}),Th=Bi(function(e,t,n,r){Fi(t,Ws(t),e,r)}),Sh=Bi(function(e,t,n,r){Fi(t,zs(t),e,r)}),Mh=_o(tr),Ih=ni(function(e){return e.push(ie,co),a(Th,ie,e)}),Ah=ni(function(e){return e.push(ie,fo),a(Fh,ie,e)}),Rh=Qi(function(e,t,n){e[t]=n},Cl(Sl)),Vh=Qi(function(e,t,n){dc.call(e,t)?e[t].push(n):e[t]=[n]},ko),Lh=ni(jr),Nh=Bi(function(e,t,n){Ur(e,t,n)}),Fh=Bi(function(e,t,n,r){Ur(e,t,n,r)}),Dh=_o(function(e,t){var n={};if(null==e)return n;var r=!1;t=y(t,function(t){return t=Oi(t,e),r||(r=t.length>1),t}),Fi(e,go(e),n),r&&(n=rr(n,fe|he|pe,ho));for(var i=t.length;i--;)yi(n,t[i]);return n}),zh=_o(function(e,t){return null==e?{}:Gr(e,t)}),Wh=so(zs),Bh=so(Ws),Yh=$i(function(e,t,n){return t=t.toLowerCase(),e+(n?il(t):t)}),Uh=$i(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),qh=$i(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Zh=Zi("toLowerCase"),$h=$i(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Gh=$i(function(e,t,n){return e+(n?" ":"")+Hh(t)}),Xh=$i(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Hh=Zi("toUpperCase"),Jh=ni(function(e,t){try{return a(e,ie,t)}catch(e){return Qa(e)?e:new ic(e)}}),Kh=_o(function(e,t){return l(t,function(t){t=Qo(t),er(e,t,uh(e[t],e))}),e}),Qh=Ji(),ep=Ji(!0),tp=ni(function(e,t){return function(n){return jr(n,e,t)}}),np=ni(function(e,t){return function(n){return jr(e,n,t)}}),rp=to(y),ip=to(f),op=to(g),up=io(),ap=io(!0),sp=eo(function(e,t){return e+t},0),lp=ao("ceil"),cp=eo(function(e,t){return e/t},1),fp=ao("floor"),hp=eo(function(e,t){return e*t},1),pp=ao("round"),vp=eo(function(e,t){return e-t},0);return n.after=xa,n.ary=ja,n.assign=Ph,n.assignIn=Ch,n.assignInWith=Th,n.assignWith=Sh,n.at=Mh,n.before=Ea,n.bind=uh,n.bindAll=Kh,n.bindKey=ah,n.castArray=Da,n.chain=Hu,n.chunk=ru,n.compact=iu,n.concat=ou,n.cond=El,n.conforms=Pl,n.constant=Cl,n.countBy=Jf,n.create=Cs,n.curry=Pa,n.curryRight=Ca,n.debounce=Ta,n.defaults=Ih,n.defaultsDeep=Ah,n.defer=sh,n.delay=lh,n.difference=Af,n.differenceBy=Rf,n.differenceWith=Vf,n.drop=uu,n.dropRight=au,n.dropRightWhile=su,n.dropWhile=lu,n.fill=cu,n.filter=aa,n.flatMap=sa,n.flatMapDeep=la,n.flatMapDepth=ca,n.flatten=pu,n.flattenDeep=vu,n.flattenDepth=yu,n.flip=Sa,n.flow=Qh,n.flowRight=ep,n.fromPairs=du,n.functions=Vs,n.functionsIn=Ls,n.groupBy=eh,n.initial=gu,n.intersection=Lf,n.intersectionBy=Nf,n.intersectionWith=Ff,n.invert=Rh,n.invertBy=Vh,n.invokeMap=th,n.iteratee=Ml,n.keyBy=nh,n.keys=zs,n.keysIn=Ws,n.map=va,n.mapKeys=Bs,n.mapValues=Ys,n.matches=Il,n.matchesProperty=Al,n.memoize=Ma,n.merge=Nh,n.mergeWith=Fh,n.method=tp,n.methodOf=np,n.mixin=Rl,n.negate=Ia,n.nthArg=Nl,n.omit=Dh,n.omitBy=Us,n.once=Aa,n.orderBy=ya,n.over=rp,n.overArgs=ch,n.overEvery=ip,n.overSome=op,n.partial=fh,n.partialRight=hh,n.partition=rh,n.pick=zh,n.pickBy=qs,n.property=Fl,n.propertyOf=Dl,n.pull=Df,n.pullAll=xu,n.pullAllBy=ju,n.pullAllWith=Eu,n.pullAt=zf,n.range=up,n.rangeRight=ap,n.rearg=ph,n.reject=ma,n.remove=Pu,n.rest=Ra,n.reverse=Cu,n.sampleSize=ba,n.set=$s,n.setWith=Gs,n.shuffle=wa,n.slice=Tu,n.sortBy=ih,n.sortedUniq=Lu,n.sortedUniqBy=Nu,n.split=yl,n.spread=Va,n.tail=Fu,n.take=Du,n.takeRight=zu,n.takeRightWhile=Wu,n.takeWhile=Bu,n.tap=Ju,n.throttle=La,n.thru=Ku,n.toArray=bs,n.toPairs=Wh,n.toPairsIn=Bh,n.toPath=Zl,n.toPlainObject=js,n.transform=Xs,n.unary=Na,n.union=Wf,n.unionBy=Bf,n.unionWith=Yf,n.uniq=Yu,n.uniqBy=Uu,n.uniqWith=qu,n.unset=Hs,n.unzip=Zu,n.unzipWith=$u,n.update=Js,n.updateWith=Ks,n.values=Qs,n.valuesIn=el,n.without=Uf,n.words=jl,n.wrap=Fa,n.xor=qf,n.xorBy=Zf,n.xorWith=$f,n.zip=Gf,n.zipObject=Gu,n.zipObjectDeep=Xu,n.zipWith=Xf,n.entries=Wh,n.entriesIn=Bh,n.extend=Ch,n.extendWith=Th,Rl(n,n),n.add=sp,n.attempt=Jh,n.camelCase=Yh,n.capitalize=il,n.ceil=lp,n.clamp=tl,n.clone=za,n.cloneDeep=Ba,n.cloneDeepWith=Ya,n.cloneWith=Wa,n.conformsTo=Ua,n.deburr=ol,n.defaultTo=Tl,n.divide=cp,n.endsWith=ul,n.eq=qa,n.escape=al,n.escapeRegExp=sl,n.every=ua,n.find=Kf,n.findIndex=fu,n.findKey=Ts,n.findLast=Qf,n.findLastIndex=hu,n.findLastKey=Ss,n.floor=fp,n.forEach=fa,n.forEachRight=ha,n.forIn=Ms,n.forInRight=Is,n.forOwn=As,n.forOwnRight=Rs,n.get=Ns,n.gt=vh,n.gte=yh,n.has=Fs,n.hasIn=Ds,n.head=_u,n.identity=Sl,n.includes=pa,n.indexOf=mu,n.inRange=nl,n.invoke=Lh,n.isArguments=dh,n.isArray=_h,n.isArrayBuffer=mh,n.isArrayLike=Za,n.isArrayLikeObject=$a,n.isBoolean=Ga,n.isBuffer=gh,n.isDate=bh,n.isElement=Xa,n.isEmpty=Ha,n.isEqual=Ja,n.isEqualWith=Ka,n.isError=Qa,n.isFinite=es,n.isFunction=ts,n.isInteger=ns,n.isLength=rs,n.isMap=wh,n.isMatch=us,n.isMatchWith=as,n.isNaN=ss,n.isNative=ls,n.isNil=fs,n.isNull=cs,n.isNumber=hs,n.isObject=is,n.isObjectLike=os,n.isPlainObject=ps,n.isRegExp=kh,n.isSafeInteger=vs,n.isSet=Oh,n.isString=ys,n.isSymbol=ds,n.isTypedArray=xh,n.isUndefined=_s,n.isWeakMap=ms,n.isWeakSet=gs,n.join=bu,n.kebabCase=Uh,n.last=wu,n.lastIndexOf=ku,n.lowerCase=qh,n.lowerFirst=Zh,n.lt=jh,n.lte=Eh,n.max=Gl,n.maxBy=Xl,n.mean=Hl,n.meanBy=Jl,n.min=Kl,n.minBy=Ql,n.stubArray=zl,n.stubFalse=Wl,n.stubObject=Bl,n.stubString=Yl,n.stubTrue=Ul,n.multiply=hp,n.nth=Ou,n.noConflict=Vl,n.noop=Ll,n.now=oh,n.pad=ll,n.padEnd=cl,n.padStart=fl,n.parseInt=hl,n.random=rl,n.reduce=da,n.reduceRight=_a,n.repeat=pl,n.replace=vl,n.result=Zs,n.round=pp,n.runInContext=e,n.sample=ga,n.size=ka,n.snakeCase=$h,n.some=Oa,n.sortedIndex=Su,n.sortedIndexBy=Mu,n.sortedIndexOf=Iu,n.sortedLastIndex=Au,n.sortedLastIndexBy=Ru,n.sortedLastIndexOf=Vu,n.startCase=Gh,n.startsWith=dl,n.subtract=vp,n.sum=ec,n.sumBy=tc,n.template=_l,n.times=ql,n.toFinite=ws,n.toInteger=ks,n.toLength=Os,n.toLower=ml,n.toNumber=xs,n.toSafeInteger=Es,n.toString=Ps,n.toUpper=gl,n.trim=bl,n.trimEnd=wl,n.trimStart=kl,n.truncate=Ol,n.unescape=xl,n.uniqueId=$l,n.upperCase=Xh,n.upperFirst=Hh,n.each=fa,n.eachRight=ha,n.first=_u,Rl(n,function(){var e={};return pr(n,function(t,r){dc.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.4",l(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),l(["drop","take"],function(e,t){b.prototype[e]=function(n){n=n===ie?1:qc(ks(n),0);var r=this.__filtered__&&!t?new b(this):this.clone();return r.__filtered__?r.__takeCount__=Zc(n,r.__takeCount__):r.__views__.push({size:Zc(n,Le),type:e+(r.__dir__<0?"Right":"")}),r},b.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),l(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Se||3==n;b.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ko(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),l(["head","last"],function(e,t){var n="take"+(t?"Right":"");b.prototype[e]=function(){return this[n](1).value()[0]}}),l(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");b.prototype[e]=function(){return this.__filtered__?new b(this):this[n](1)}}),b.prototype.compact=function(){return this.filter(Sl)},b.prototype.find=function(e){return this.filter(e).head()},b.prototype.findLast=function(e){return this.reverse().find(e)},b.prototype.invokeMap=ni(function(e,t){return"function"==typeof e?new b(this):this.map(function(n){return jr(n,e,t)})}),b.prototype.reject=function(e){return this.filter(Ia(ko(e)))},b.prototype.slice=function(e,t){e=ks(e);var n=this;return n.__filtered__&&(e>0||t<0)?new b(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ie&&(t=ks(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},b.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},b.prototype.toArray=function(){return this.take(Le)},pr(b.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),u=n[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);u&&(n.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,l=t instanceof b,c=s[0],f=l||_h(t),h=function(e){var t=u.apply(n,d([e],s));return o&&p?t[0]:t};f&&r&&"function"==typeof c&&1!=c.length&&(l=f=!1);var p=this.__chain__,v=!!this.__actions__.length,y=a&&!p,_=l&&!v;if(!a&&f){t=_?t:new b(this);var m=e.apply(t,s);return m.__actions__.push({func:Ku,args:[h],thisArg:ie}),new i(m,p)}return y&&_?e.apply(this,s):(m=this.thru(h),y?o?m.value()[0]:m.value():m)})}),l(["pop","push","shift","sort","splice","unshift"],function(e){var t=fc[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(_h(n)?n:[],e)}return this[r](function(n){return t.apply(_h(n)?n:[],e)})}}),pr(b.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(of[i]||(of[i]=[])).push({name:t,func:r})}}),of[Ki(ie,_e).name]=[{name:"wrapper",func:ie}],b.prototype.clone=T,b.prototype.reverse=J,b.prototype.value=te,n.prototype.at=Hf,n.prototype.chain=Qu,n.prototype.commit=ea,n.prototype.next=ta,n.prototype.plant=ra,n.prototype.reverse=ia,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=oa,n.prototype.first=n.prototype.head,Ic&&(n.prototype[Ic]=na),n}();An._=Xn,(i=function(){return Xn}.call(t,n,t,r))!==ie&&(r.exports=i)}).call(this)}).call(t,n(18),n(49)(e))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name=n.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error(e).stack,n}return o(t,e),t}(Error);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),u=n(3),a=n(6),s=n(12),l=t.Line=function(){function e(t,n){r(this,e),this.setVectors(t,n)}return i(e,[{key:"eql",value:function(e){return this.isParallelTo(e)&&this.contains(e.anchor)}},{key:"dup",value:function(){return new e(this.anchor,this.direction)}},{key:"translate",value:function(t){var n=t.elements||t;return new e([this.anchor.elements[0]+n[0],this.anchor.elements[1]+n[1],this.anchor.elements[2]+(n[2]||0)],this.direction)}},{key:"isParallelTo",value:function(e){if(e.normal||e.start&&e.end)return e.isParallelTo(this);var t=this.direction.angleFrom(e.direction);return Math.abs(t)<=o.PRECISION||Math.abs(t-Math.PI)<=o.PRECISION}},{key:"distanceFrom",value:function(e){if(e.normal||e.start&&e.end)return e.distanceFrom(this);if(e.direction){if(this.isParallelTo(e))return this.distanceFrom(e.anchor);var t=this.direction.cross(e.direction).toUnitVector().elements,n=this.anchor.elements,r=e.anchor.elements;return Math.abs((n[0]-r[0])*t[0]+(n[1]-r[1])*t[1]+(n[2]-r[2])*t[2])}var i=e.elements||e,n=this.anchor.elements,o=this.direction.elements,u=i[0]-n[0],a=i[1]-n[1],s=(i[2]||0)-n[2],l=Math.sqrt(u*u+a*a+s*s);if(0===l)return 0;var c=(u*o[0]+a*o[1]+s*o[2])/l,f=1-c*c;return Math.abs(l*Math.sqrt(f<0?0:f))}},{key:"contains",value:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=this.distanceFrom(e);return null!==t&&t<=o.PRECISION}},{key:"positionOf",value:function(e){if(!this.contains(e))return null;var t=e.elements||e,n=this.anchor.elements,r=this.direction.elements;return(t[0]-n[0])*r[0]+(t[1]-n[1])*r[1]+((t[2]||0)-n[2])*r[2]}},{key:"liesIn",value:function(e){return e.contains(this)}},{key:"intersects",value:function(e){return e.normal?e.intersects(this):!this.isParallelTo(e)&&this.distanceFrom(e)<=o.PRECISION}},{key:"intersectionWith",value:function(e){if(e.normal||e.start&&e.end)return e.intersectionWith(this);if(!this.intersects(e))return null;var t=this.anchor.elements,n=this.direction.elements,r=e.anchor.elements,i=e.direction.elements,o=n[0],a=n[1],s=n[2],l=i[0],c=i[1],f=i[2],h=t[0]-r[0],p=t[1]-r[1],v=t[2]-r[2],y=-o*h-a*p-s*v,d=l*h+c*p+f*v,_=o*o+a*a+s*s,m=l*l+c*c+f*f,g=o*l+a*c+s*f,b=(y*m/_+g*d)/(m-g*g);return new u.Vector([t[0]+b*o,t[1]+b*a,t[2]+b*s])}},{key:"pointClosestTo",value:function(e){if(e.start&&e.end){var t=e.pointClosestTo(this);return null===t?null:this.pointClosestTo(t)}if(e.direction){if(this.intersects(e))return this.intersectionWith(e);if(this.isParallelTo(e))return null;var n=this.direction.elements,r=e.direction.elements,i=n[0],o=n[1],a=n[2],l=r[0],c=r[1],f=r[2],h=a*l-i*f,p=i*c-o*l,v=o*f-a*c,y=[h*f-p*c,p*l-v*f,v*c-h*l],t=new s.Plane(e.anchor,y);return t.intersectionWith(this)}var t=e.elements||e;if(this.contains(t))return new u.Vector(t);var d=this.anchor.elements,n=this.direction.elements,i=n[0],o=n[1],a=n[2],_=d[0],m=d[1],g=d[2],h=i*(t[1]-m)-o*(t[0]-_),p=o*((t[2]||0)-g)-a*(t[1]-m),v=a*(t[0]-_)-i*((t[2]||0)-g),b=new u.Vector([o*h-a*v,a*p-i*h,i*v-o*p]),w=this.distanceFrom(t)/b.modulus();return new u.Vector([t[0]+b.elements[0]*w,t[1]+b.elements[1]*w,(t[2]||0)+b.elements[2]*w])}},{key:"rotate",value:function(t,n){void 0===n.direction&&(n=new e(n.to3D(),u.Vector.k));var r=a.Matrix.Rotation(t,n.direction).elements,i=n.pointClosestTo(this.anchor).elements,o=this.anchor.elements,s=this.direction.elements,l=i[0],c=i[1],f=i[2],h=o[0],p=o[1],v=o[2],y=h-l,d=p-c,_=v-f;return new e([l+r[0][0]*y+r[0][1]*d+r[0][2]*_,c+r[1][0]*y+r[1][1]*d+r[1][2]*_,f+r[2][0]*y+r[2][1]*d+r[2][2]*_],[r[0][0]*s[0]+r[0][1]*s[1]+r[0][2]*s[2],r[1][0]*s[0]+r[1][1]*s[1]+r[1][2]*s[2],r[2][0]*s[0]+r[2][1]*s[1]+r[2][2]*s[2]])}},{key:"reverse",value:function(){return new e(this.anchor,this.direction.x(-1))}},{key:"reflectionIn",value:function(t){if(t.normal){var n=this.anchor.elements,r=this.direction.elements,i=n[0],o=n[1],u=n[2],a=r[0],s=r[1],l=r[2],c=this.anchor.reflectionIn(t).elements,f=i+a,h=o+s,p=u+l,v=t.pointClosestTo([f,h,p]).elements;return new e(c,[v[0]+(v[0]-f)-c[0],v[1]+(v[1]-h)-c[1],v[2]+(v[2]-p)-c[2]])}if(t.direction)return this.rotate(Math.PI,t);var y=t.elements||t;return new e(this.anchor.reflectionIn([y[0],y[1],y[2]||0]),this.direction)}},{key:"setVectors",value:function(e,t){if(e=new u.Vector(e),t=new u.Vector(t),2===e.elements.length&&e.elements.push(0),2===t.elements.length&&t.elements.push(0),e.elements.length>3||t.elements.length>3)return null;var n=t.modulus();return 0===n?null:(this.anchor=e,this.direction=new u.Vector([t.elements[0]/n,t.elements[1]/n,t.elements[2]/n]),this)}}]),e}();l.X=new l(u.Vector.Zero(3),u.Vector.i),l.Y=new l(u.Vector.Zero(3),u.Vector.j),l.Z=new l(u.Vector.Zero(3),u.Vector.k)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(5),u=n(6),a=n(3),s=n(11),l=t.Plane=function(){function e(t,n,i){r(this,e),this.setVectors(t,n,i)}return i(e,[{key:"eql",value:function(e){return this.contains(e.anchor)&&this.isParallelTo(e)}},{key:"dup",value:function(){return new e(this.anchor,this.normal)}},{key:"translate",value:function(t){var n=t.elements||t;return new e([this.anchor.elements[0]+n[0],this.anchor.elements[1]+n[1],this.anchor.elements[2]+(n[2]||0)],this.normal)}},{key:"isParallelTo",value:function(e){var t;return e.normal?(t=this.normal.angleFrom(e.normal),Math.abs(t)<=o.PRECISION||Math.abs(Math.PI-t)<=o.PRECISION):e.direction?this.normal.isPerpendicularTo(e.direction):null}},{key:"isPerpendicularTo",value:function(e){var t=this.normal.angleFrom(e.normal);return Math.abs(Math.PI/2-t)<=o.PRECISION}},{key:"distanceFrom",value:function(e){if(this.intersects(e)||this.contains(e))return 0;if(e.anchor){var t=this.anchor.elements,n=e.anchor.elements,r=this.normal.elements;return Math.abs((t[0]-n[0])*r[0]+(t[1]-n[1])*r[1]+(t[2]-n[2])*r[2])}var i=e.elements||e,t=this.anchor.elements,r=this.normal.elements;return Math.abs((t[0]-i[0])*r[0]+(t[1]-i[1])*r[1]+(t[2]-(i[2]||0))*r[2])}},{key:"contains",value:function(e){if(e.normal)return null;if(e.direction)return this.contains(e.anchor)&&this.contains(e.anchor.add(e.direction));var t=e.elements||e,n=this.anchor.elements,r=this.normal.elements;return Math.abs(r[0]*(n[0]-t[0])+r[1]*(n[1]-t[1])+r[2]*(n[2]-(t[2]||0)))<=o.PRECISION}},{key:"intersects",value:function(e){return void 0===e.direction&&void 0===e.normal?null:!this.isParallelTo(e)}},{key:"intersectionWith",value:function(e){if(!this.intersects(e))return null;if(e.direction){var t=e.anchor.elements,n=e.direction.elements,r=this.anchor.elements,i=this.normal.elements,o=(i[0]*(r[0]-t[0])+i[1]*(r[1]-t[1])+i[2]*(r[2]-t[2]))/(i[0]*n[0]+i[1]*n[1]+i[2]*n[2]);return new a.Vector([t[0]+n[0]*o,t[1]+n[1]*o,t[2]+n[2]*o])}if(e.normal){for(var l=this.normal.cross(e.normal).toUnitVector(),i=this.normal.elements,t=this.anchor.elements,c=e.normal.elements,f=e.anchor.elements,h=u.Matrix.Zero(2,2),p=0;h.isSingular();)p++,h=new u.Matrix([[i[p%3],i[(p+1)%3]],[c[p%3],c[(p+1)%3]]]);for(var v=h.inverse().elements,y=i[0]*t[0]+i[1]*t[1]+i[2]*t[2],d=c[0]*f[0]+c[1]*f[1]+c[2]*f[2],_=[v[0][0]*y+v[0][1]*d,v[1][0]*y+v[1][1]*d],m=[],g=1;g<=3;g++)m.push(p===g?0:_[(g+(5-p)%3)%3]);return new s.Line(m,l)}}},{key:"pointClosestTo",value:function(e){var t=e.elements||e,n=this.anchor.elements,r=this.normal.elements,i=(n[0]-t[0])*r[0]+(n[1]-t[1])*r[1]+(n[2]-(t[2]||0))*r[2];return new a.Vector([t[0]+r[0]*i,t[1]+r[1]*i,(t[2]||0)+r[2]*i])}},{key:"rotate",value:function(t,n){var r=t.determinant?t.elements:u.Matrix.Rotation(t,n.direction).elements,i=n.pointClosestTo(this.anchor).elements,o=this.anchor.elements,a=this.normal.elements,s=i[0],l=i[1],c=i[2],f=o[0],h=o[1],p=o[2],v=f-s,y=h-l,d=p-c;return new e([s+r[0][0]*v+r[0][1]*y+r[0][2]*d,l+r[1][0]*v+r[1][1]*y+r[1][2]*d,c+r[2][0]*v+r[2][1]*y+r[2][2]*d],[r[0][0]*a[0]+r[0][1]*a[1]+r[0][2]*a[2],r[1][0]*a[0]+r[1][1]*a[1]+r[1][2]*a[2],r[2][0]*a[0]+r[2][1]*a[1]+r[2][2]*a[2]])}},{key:"reflectionIn",value:function(t){if(t.normal){var n=this.anchor.elements,r=this.normal.elements,i=n[0],o=n[1],u=n[2],a=r[0],s=r[1],l=r[2],c=this.anchor.reflectionIn(t).elements,f=i+a,h=o+s,p=u+l,v=t.pointClosestTo([f,h,p]).elements;return new e(c,[v[0]+(v[0]-f)-c[0],v[1]+(v[1]-h)-c[1],v[2]+(v[2]-p)-c[2]])}if(t.direction)return this.rotate(Math.PI,t);var y=t.elements||t;return new e(this.anchor.reflectionIn([y[0],y[1],y[2]||0]),this.normal)}},{key:"setVectors",value:function(e,t,n){if(e=new a.Vector(e),null===(e=e.to3D()))return null;if(t=new a.Vector(t),null===(t=t.to3D()))return null;if(void 0===n)n=null;else if(n=new a.Vector(n),null===(n=n.to3D()))return null;var r,i,o=e.elements[0],u=e.elements[1],s=e.elements[2],l=t.elements[0],c=t.elements[1],f=t.elements[2];if(null!==n){var h=n.elements[0],p=n.elements[1],v=n.elements[2];if(r=new a.Vector([(c-u)*(v-s)-(f-s)*(p-u),(f-s)*(h-o)-(l-o)*(v-s),(l-o)*(p-u)-(c-u)*(h-o)]),0===(i=r.modulus()))return null;r=new a.Vector([r.elements[0]/i,r.elements[1]/i,r.elements[2]/i])}else{if(0===(i=Math.sqrt(l*l+c*c+f*f)))return null;r=new a.Vector([t.elements[0]/i,t.elements[1]/i,t.elements[2]/i])}return this.anchor=e,this.normal=r,this}}]),e}();l.XY=new l(a.Vector.Zero(3),a.Vector.k),l.YZ=new l(a.Vector.Zero(3),a.Vector.i),l.ZX=new l(a.Vector.Zero(3),a.Vector.j),l.YX=l.XY,l.ZY=l.YZ,l.XZ=l.ZX,l.fromPoints=function(e){var t,n,r,i,u,s,c,f,h,p,v=e.length,y=[],d=a.Vector.Zero(3);for(t=0;t<v;t++){if(null===(n=new a.Vector(e[t]).to3D()))return null;if(y.push(n),(r=y.length)>2){if(u=y[r-1].elements,s=y[r-2].elements,c=y[r-3].elements,i=new a.Vector([(u[1]-s[1])*(c[2]-s[2])-(u[2]-s[2])*(c[1]-s[1]),(u[2]-s[2])*(c[0]-s[0])-(u[0]-s[0])*(c[2]-s[2]),(u[0]-s[0])*(c[1]-s[1])-(u[1]-s[1])*(c[0]-s[0])]).toUnitVector(),r>3&&null!==(h=i.angleFrom(p))&&!(Math.abs(h)<=o.PRECISION||Math.abs(h-Math.PI)<=o.PRECISION))return null;d=d.add(i),p=i}}return u=y[1].elements,s=y[0].elements,c=y[r-1].elements,f=y[r-2].elements,d=d.add(new a.Vector([(u[1]-s[1])*(c[2]-s[2])-(u[2]-s[2])*(c[1]-s[1]),(u[2]-s[2])*(c[0]-s[0])-(u[0]-s[0])*(c[2]-s[2]),(u[0]-s[0])*(c[1]-s[1])-(u[1]-s[1])*(c[0]-s[0])]).toUnitVector()).add(new a.Vector([(s[1]-c[1])*(f[2]-c[2])-(s[2]-c[2])*(f[1]-c[1]),(s[2]-c[2])*(f[0]-c[0])-(s[0]-c[0])*(f[2]-c[2]),(s[0]-c[0])*(f[1]-c[1])-(s[1]-c[1])*(f[0]-c[0])]).toUnitVector()),new l(y[0],d)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41);Object.defineProperty(t,"CircularLinkedList",{enumerable:!0,get:function(){return r.CircularLinkedList}});var i=n(11);Object.defineProperty(t,"Line",{enumerable:!0,get:function(){return i.Line}});var o=n(42);Object.defineProperty(t,"LineSegment",{enumerable:!0,get:function(){return o.LineSegment}});var u=n(14);Object.defineProperty(t,"LinkedList",{enumerable:!0,get:function(){return u.LinkedList}});var a=n(43);Object.defineProperty(t,"LinkedListNode",{enumerable:!0,get:function(){return a.LinkedListNode}});var s=n(6);Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return s.Matrix}});var l=n(12);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return l.Plane}});var c=n(17);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return c.Polygon}});var f=n(3);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return f.Vector}});var h=n(45);Object.defineProperty(t,"Vertex",{enumerable:!0,get:function(){return h.Vertex}});var p=n(44);Object.defineProperty(t,"mht",{enumerable:!0,get:function(){return p.mht}}),Object.defineProperty(t,"makeLookAt",{enumerable:!0,get:function(){return p.makeLookAt}}),Object.defineProperty(t,"makePerspective",{enumerable:!0,get:function(){return p.makePerspective}}),Object.defineProperty(t,"makeFrustum",{enumerable:!0,get:function(){return p.makeFrustum}}),Object.defineProperty(t,"makeOrtho",{enumerable:!0,get:function(){return p.makeOrtho}});var v=n(5);Object.defineProperty(t,"PRECISION",{enumerable:!0,get:function(){return v.PRECISION}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.LinkedList=function(){function e(){r(this,e),this.length=0,this.first=null,this.last=null}return i(e,[{key:"forEach",value:function(e,t){for(var n=this.first,r=this.length,i=0;i<r;i++)e.call(t,n,i),n=n.next}},{key:"at",value:function(e){if(!(e>=0&&e<this.length))return null;for(var t=this.first;e--;)t=t.next;return t}},{key:"randomNode",value:function(){var e=Math.floor(Math.random()*this.length);return this.at(e)}},{key:"toArray",value:function(){for(var e=[],t=this.first,n=this.length;n--;)e.push(t.data||t),t=t.next;return e}}]),e}();o.prototype.each=o.prototype.forEach},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},c=n(2),f=r(c),h=n(0),p=r(h),v=n(16),y=r(v),d=n(36),_=r(d),m=n(4),g=n(1),b=n(7),w=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=null;return(0,m.typeCheck)("object",e)&&(r=t._getCanvasByElement(e)),(0,m.typeCheck)("string",e)&&(r=t._getCanvasById(e)),null===r&&(r=document.createElement("canvas")),n._canvas=r,n._context=r.getContext("2d"),n._groupHelper=new y.default,n._groupHelper.distinct=!0,n._groupHelper.validator=function(e){if(!(e instanceof f.default))throw new g.ArgumentError("This object isn't a instance of Shape.")},n._sketchbookMouseEventHelper=new _.default(n),n._init(),n}return u(t,e),s(t,[{key:"_init",value:function(){this._opt.origin=b.ORIGIN.LEFT_TOP,this._opt.coordinateSystem=b.COORDINATE_SYSTEM.SCREEN}},{key:"translate",value:function(e,n){var r=this._convertPositionOfCS(e,n),i=a(r,2);e=i[0],n=i[1],l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"translate",this).call(this,e,n)}},{key:"setTranslate",value:function(e,n){var r=this._convertPositionOfCS(e,n),i=a(r,2);e=i[0],n=i[1],l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setTranslate",this).call(this,e,n)}},{key:"_convertPositionOfCS",value:function(e,t){return this._opt.coordinateSystem===b.COORDINATE_SYSTEM.CARTESIAN?[e,-t]:[e,t]}},{key:"add",value:function(e){this._groupHelper.add(e)}},{key:"renderAll",value:function(){this._renderChild()}},{key:"_renderChild",value:function(){var e=this;this._groupHelper.iterate(function(t){"render"in t&&t.renderShape(e)})}},{key:"beforeRender",value:function(e){var t=e.context,n=e._cs.basis;t.setTransform(n.a,n.b,n.c,n.d,n.e,n.f),this.applyOptions(e)}},{key:"render",value:function(e){var t=e.convertPositionFromLocalCSToScreen(this._getOrigin());e._context.drawImage(this._canvas,t.x,t.y)}},{key:"_getOrigin",value:function(){if(this._opt.origin===b.ORIGIN.CENTER){var e=this.x-.5*this.width,t=this.y-.5*this.height;return new p.default([e,t])}return new p.default(this._position)}},{key:"clear",value:function(){this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this.width,this.height),this._context.restore()}},{key:"convertPositionFromLocalCSToScreen",value:function(e){if(!(e instanceof p.default))throw new TypeError("Input position is not Point.");if(this._opt.coordinateSystem===b.COORDINATE_SYSTEM.CARTESIAN){var t=e.x,n=this.height-e.y;return new p.default([t,n])}return new p.default(e)}},{key:"addEventListener",value:function(e,t,n){return this._sketchbookMouseEventHelper.addEventListener(e,t,n)}},{key:"removeEventListener",value:function(e,t,n){this._sketchbookMouseEventHelper.removeEventListener(e,t,n)}},{key:"canvas",get:function(){return this._canvas}},{key:"context",get:function(){return this._context}},{key:"width",get:function(){return this._canvas.width},set:function(e){this._canvas.width=e}},{key:"height",get:function(){return this._canvas.height},set:function(e){this._canvas.height=e}}],[{key:"_getCanvasByElement",value:function(e){if(!e.nodeName||"CANVAS"!==e.nodeName)throw new TypeError("Input element is not canvas.");return e}},{key:"_getCanvasById",value:function(e){var t=document.getElementById(e);if((0,m.typeCheck)("null",t))throw new g.CannotFoundError("Cannot found element by id.");return t}}]),t}(f.default);t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9),u=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(4),s=n(1),l=function(){function e(){r(this,e),this._objects=[],this._distinct=!1,this._validator=null}return i(e,[{key:"add",value:function(e){var t=this;if(!e)throw new s.CannotFoundError("Cannot found objects.");if(!(0,a.typeCheck)("array",e))return void this._add(e);u.default.each(e,function(e){t._add(e)})}},{key:"_add",value:function(e){this.validator&&this.validator(e),this.distinct&&u.default.includes(this._objects,e)||this._objects.push(e)}},{key:"iterate",value:function(e){if(!(0,a.typeCheck)("function",e))throw new TypeError("The callback must be function.");u.default.each(this._objects,function(t){e(t)})}},{key:"distinct",get:function(){return this._distinct},set:function(e){this._distinct=e}},{key:"validator",get:function(){return this._validator},set:function(e){if(!(0,a.typeCheck)("function",e))throw new TypeError("The validator must be function.");this._validator=e}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),u=n(5),a=n(6),s=n(3),l=n(12),c=n(11);t.Polygon=function(){function e(t,n){r(this,e),this.setVertices(t,n)}return i(e,[{key:"v",value:function(e){return this.vertices.at(e-1).data}},{key:"nodeFor",value:function(e){return this.vertices.withData(e)}},{key:"dup",value:function(){return new e(this.vertices,this.plane)}},{key:"translate",value:function(e){var t=e.elements||e;return this.vertices.each(function(e){var n=e.data.elements;e.data.setElements([n[0]+t[0],n[1]+t[1],n[2]+(t[2]||0)])}),this.plane=this.plane.translate(e),this.updateTrianglePlanes(function(t){return t.translate(e)}),this}},{key:"rotate",value:function(e,t){var n=a.Matrix.Rotation(e,t.direction);return this.vertices.each(function(e){e.data.setElements(e.data.rotate(n,t).elements)}),this.plane=this.plane.rotate(n,t),this.updateTrianglePlanes(function(e){return e.rotate(n,t)}),this}},{key:"scale",value:function(e,t){var n=t.elements||t;this.vertices.each(function(t){var r=t.data.elements;t.data.setElements([n[0]+e*(r[0]-n[0]),n[1]+e*(r[1]-n[1]),(n[2]||0)+e*(r[2]-(n[2]||0))])});var r=this.vertices.first.data;return this.plane.anchor.setElements(r),this.updateTrianglePlanes(function(e){return new l.Plane(r,e.normal)}),this}},{key:"updateTrianglePlanes",value:function(e){var t;if(null!==this.cached.triangles)for(t=this.cached.triangles.length;t--;)this.cached.triangles[t].plane=e(this.cached.triangles[t].plane);if(null!==this.cached.surfaceIntegralElements)for(t=this.cached.surfaceIntegralElements.length;t--;)this.cached.surfaceIntegralElements[t].plane=e(this.cached.surfaceIntegralElements[t].plane)}},{key:"isTriangle",value:function(){return 3===this.vertices.length}},{key:"trianglesForSurfaceIntegral",value:function(){if(null!==this.cached.surfaceIntegralElements)return this.cached.surfaceIntegralElements;var t=[],n=this.vertices.first.data,r=this.plane;return this.vertices.each(function(i,o){if(!(o<2)){var u=[n,i.prev.data,i.data];t.push(new e(u,l.Plane.fromPoints(u)||r))}}),this.setCache("surfaceIntegralElements",t)}},{key:"area",value:function(){if(this.isTriangle()){var e=this.vertices.first,t=e.next,n=t.next;return e=e.data.elements,t=t.data.elements,n=n.data.elements,.5*new s.Vector([(e[1]-t[1])*(n[2]-t[2])-(e[2]-t[2])*(n[1]-t[1]),(e[2]-t[2])*(n[0]-t[0])-(e[0]-t[0])*(n[2]-t[2]),(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])]).modulus()}for(var r=this.trianglesForSurfaceIntegral(),i=0,o=r.length;o--;)i+=r[o].area()*r[o].plane.normal.dot(this.plane.normal);return i}},{key:"centroid",value:function(){if(this.isTriangle()){var e=this.v(1).elements,t=this.v(2).elements,n=this.v(3).elements;return new s.Vector([(e[0]+t[0]+n[0])/3,(e[1]+t[1]+n[1])/3,(e[2]+t[2]+n[2])/3])}for(var e,r,n,i=0,o=s.Vector.Zero(3),u=this.trianglesForSurfaceIntegral(),a=u.length;a--;)e=u[a].area()*u[a].plane.normal.dot(this.plane.normal),i+=e,r=o.elements,n=u[a].centroid().elements,o.setElements([r[0]+n[0]*e,r[1]+n[1]*e,r[2]+n[2]*e]);return o.x(1/i)}},{key:"projectionOn",value:function(t){var n=[];return this.vertices.each(function(e){n.push(t.pointClosestTo(e.data))}),new e(n)}},{key:"removeVertex",value:function(e){if(!this.isTriangle()){var t=this.nodeFor(e);if(null===t)return null;this.clearCache();var n=t.prev,r=t.next,i=n.data.isConvex(this),u=r.data.isConvex(this);return t.data.isConvex(this)?this.convexVertices.remove(this.convexVertices.withData(t.data)):this.reflexVertices.remove(this.reflexVertices.withData(t.data)),this.vertices.remove(t),i!==n.data.isConvex(this)&&(i?(this.convexVertices.remove(this.convexVertices.withData(n.data)),this.reflexVertices.append(new o.LinkedList.Node(n.data))):(this.reflexVertices.remove(this.reflexVertices.withData(n.data)),this.convexVertices.append(new o.LinkedList.Node(n.data)))),u!==r.data.isConvex(this)&&(u?(this.convexVertices.remove(this.convexVertices.withData(r.data)),this.reflexVertices.append(new o.LinkedList.Node(r.data))):(this.reflexVertices.remove(this.reflexVertices.withData(r.data)),this.convexVertices.append(new o.LinkedList.Node(r.data)))),this}}},{key:"contains",value:function(e){return this.containsByWindingNumber(e)}},{key:"containsByWindingNumber",value:function(e){var t=e.elements||e;if(!this.plane.contains(t))return!1;if(this.hasEdgeContaining(t))return!1;var n,r,i,o,a,l=0,c=0,f=this;return this.vertices.each(function(e){n=e.data.elements,r=e.next.data.elements,i=new s.Vector([n[0]-t[0],n[1]-t[1],n[2]-(t[2]||0)]),o=new s.Vector([r[0]-t[0],r[1]-t[1],r[2]-(t[2]||0)]),null!==(a=i.angleFrom(o))&&0!==a&&(l+=(i.cross(o).isParallelTo(f.plane.normal)?1:-1)*a,l>=2*Math.PI-u.PRECISION&&(c++,l-=2*Math.PI),l<=-2*Math.PI+u.PRECISION&&(c--,l+=2*Math.PI))}),0!==c}},{key:"hasEdgeContaining",value:function(e){var t=e.elements||e,n=!1;return this.vertices.each(function(e){c.Line.Segment.create(e.data,e.next.data).contains(t)&&(n=!0)}),n}},{key:"toTriangles",value:function(){return null!==this.cached.triangles?this.cached.triangles:this.setCache("triangles",this.triangulateByEarClipping())}},{key:"triangulateByEarClipping",value:function(){for(var t,n,r,i,o=this.dup(),u=[];!o.isTriangle();){for(t=!1;!t;)t=!0,n=o.convexVertices.randomNode(),r=o.vertices.withData(n.data),i=new e([r.data,r.next.data,r.prev.data],this.plane),o.reflexVertices.each(function(e){e.data!==r.prev.data&&e.data!==r.next.data&&(i.contains(e.data)||i.hasEdgeContaining(e.data))&&(t=!1)});u.push(i),o.removeVertex(r.data)}return u.push(new e(o.vertices,this.plane)),u}},{key:"setVertices",value:function(t,n){var r=t.toArray?t.toArray():t;if(this.plane=n&&n.normal?n.dup():l.Plane.fromPoints(r),null===this.plane)return null;this.vertices=new o.LinkedList.Circular;for(var i,u=r.length;u--;)i=r[u].isConvex?r[u]:new e.Vertex(r[u]),this.vertices.prepend(new o.LinkedList.Node(i));return this.clearCache(),this.populateVertexTypeLists(),this}},{key:"populateVertexTypeLists",value:function(){this.convexVertices=new o.LinkedList.Circular,this.reflexVertices=new o.LinkedList.Circular;var e=this;this.vertices.each(function(t){e[t.data.type(e)+"Vertices"].append(new o.LinkedList.Node(t.data))})}},{key:"copyVertices",value:function(){this.clearCache(),this.vertices.each(function(t){t.data=new e.Vertex(t.data)}),this.populateVertexTypeLists()}},{key:"clearCache",value:function(){this.cached={triangles:null,surfaceIntegralElements:null}}},{key:"setCache",value:function(e,t){return this.cached[e]=t,t}},{key:"inspect",value:function(){var e=[];return this.vertices.each(function(t){e.push(t.data.inspect())}),e.join(" -> ")}}]),e}()},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._init(e),n}return o(t,e),u(t,[{key:"_init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"radius"in e||(this._opt.radius=0),"sAngle"in e||(this._opt.sAngle=0),"eAngle"in e||(this._opt.eAngle=0),"counterclockwise"in e||(this._opt.counterclockwise=!1)}},{key:"render",value:function(e){var t=e.context;t.beginPath(),t.arc(this.x,this.y,this.radius,this.sAngle*Math.PI,this.eAngle*Math.PI,this.counterclockwise),this._opt.isStroked&&t.stroke(),this._opt.isFilled&&t.fill()}},{key:"radius",get:function(){return this._opt.radius},set:function(e){this._opt.radius=e}},{key:"sAngle",get:function(){return this._opt.sAngle},set:function(e){this._opt.sAngle=e}},{key:"eAngle",get:function(){return this._opt.eAngle},set:function(e){this._opt.eAngle=e}},{key:"counterclockwise",get:function(){return this._opt.counterclockwise},set:function(e){this._opt.counterclockwise=e}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),l=r(s),c=n(4),f=n(2),h=r(f),p=n(0),v=r(p),y=n(34),d=r(y),_=n(7),m=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r._corners=[],r._boundingBoxHelper=new d.default,r._init(e,n),r}return u(t,e),a(t,[{key:"_init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._initCorners(e),"geometryType"in t||(this._opt.geometryType=_.GEOMETRY_TYPE.POLYGON)}},{key:"_initCorners",value:function(e){var t=this;if(this._corners=[],this._boundingBoxHelper.clear(),!(0,c.typeCheck)("array",e))throw new TypeError("Corners must be an array.");l.default.each(e,function(e){if((0,c.typeCheck)("array",e))return void t._addArrayCorner(e);if(e instanceof v.default)return void t._addPointCorner(e);throw new TypeError("Add wrong corner type.")}),this.position=this._boundingBoxHelper.center}},{key:"_addArrayCorner",value:function(e){if(2!==e.length)throw new TypeError("Corner must be a 2D.");this._addPointCorner(new v.default(e))}},{key:"_addPointCorner",value:function(e){var t=new v.default(e);this._corners.push(t),this._boundingBoxHelper.add(t)}},{key:"render",value:function(e){var t=e.context,n=l.default.map(this._corners,function(t){return e.convertPositionFromLocalCSToScreen(t)});t.beginPath(),l.default.each(n,function(e,n){0===n&&t.moveTo(e.x,e.y),t.lineTo(e.x,e.y)}),this._opt.geometryType===_.GEOMETRY_TYPE.POLYGON&&t.closePath(),this._opt.isStroked&&t.stroke()}},{key:"corners",get:function(){var e=[];return l.default.each(this._corners,function(t){e.push(new v.default(t))}),e},set:function(e){this._initCorners(e)}}]),t}(h.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),l=r(s),c=n(13),f=n(4),h=n(2),p=r(h),v=n(0),y=r(v),d=n(1),_=function(e){function t(e,n,r){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u));return a._corners=[],a._edges=[],a._camera=null,a._init(e,n,r),a}return u(t,e),a(t,[{key:"_init",value:function(e,t,n){this._initCorners(e),this._initEdges(t),this._initCamera(n)}},{key:"_initCorners",value:function(e){var t=this;if(!(0,f.typeCheck)("array",e))throw new TypeError("Corners must be an array.");l.default.each(e,function(e){if(!(0,f.typeCheck)("array",e))throw new TypeError("Corner must be an array.");if(3!==e.length)throw new TypeError("Corner must be a 3D.");t._corners.push(new c.Vector(e))})}},{key:"_initEdges",value:function(e){var t=this;if(!(0,f.typeCheck)("array",e))throw new TypeError("Edges must be an array.");l.default.each(e,function(e){if(!(0,f.typeCheck)("array",e))throw new TypeError("Edge must be an array.");if(2!==e.length)throw new d.ArgumentError("Edge must be a 2D.");t._edges.push(new c.Vector(e))})}},{key:"_initCamera",value:function(e){if(!(0,f.typeCheck)("array",e))throw new TypeError("Camera must be an array.");if(3!==e.length)throw new d.ArgumentError("Camera must be a 3D.");this._camera=new c.Vector(e)}},{key:"render",value:function(e){var t=this,n=e.context,r=.5*e.width,i=.5*e.height,o=l.default.map(this._corners,function(e){return e.add(t._camera)}),u=l.default.map(o,function(e){return t._cornerScaleDown(e)}),a=l.default.map(u,function(e){return t._convertCorner2Pixel(e)}),s=l.default.map(a,function(t){var n=t.e(1)*r,o=t.e(2)*i;return e.convertPositionFromLocalCSToScreen(new y.default([n,o]))});n.beginPath(),l.default.each(this._edges,function(e){var r=s[e.e(1)],i=s[e.e(2)];n.moveTo(r.x,r.y),n.lineTo(i.x,i.y),t._opt.isStroked&&n.stroke()})}},{key:"_cornerScaleDown",value:function(e){var t=e.e(1),n=e.e(2),r=e.e(3);return new c.Vector([t/r,n/r,1])}},{key:"_convertCorner2Pixel",value:function(e){var t=e.e(1),n=e.e(2);return new c.Vector([t,n])}},{key:"corners",set:function(e){this._corners=[],this._initCorners(e)}},{key:"edges",set:function(e){this._edges=[],this._initEdges(e)}},{key:"camera",set:function(e){this._initCamera(e)}}]),t}(p.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),c=n(16),f=r(c),h=n(1),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._groupHelper=new f.default,n._groupHelper.distinct=!0,n._groupHelper.validator=function(e){if(!(e instanceof l.default))throw new h.ArgumentError("This object isn't a instance of Shape.")},n}return u(t,e),a(t,[{key:"scale",value:function(e,t,n){this._groupHelper.iterate(function(r){"render"in r&&r.scale(e,t,n)})}},{key:"rotate",value:function(e,t){this._groupHelper.iterate(function(n){"render"in n&&n.rotate(e,t)})}},{key:"translate",value:function(e,t){this._groupHelper.iterate(function(n){"render"in n&&n.translate(e,t)})}},{key:"add",value:function(e){this._groupHelper.add(e)}},{key:"renderShape",value:function(e){this.visible&&this._render(e)}},{key:"_render",value:function(e){this._renderChild(e)}},{key:"_renderChild",value:function(e){this._groupHelper.iterate(function(t){"render"in t&&t.renderShape(e)})}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),c=n(0),f=r(c),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._init(e),n}return u(t,e),a(t,[{key:"_init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"x1"in e||(this._opt.x1=0),"y1"in e||(this._opt.y1=0),"x2"in e||(this._opt.x2=0),"y2"in e||(this._opt.y2=0),this.x=.5*(this._opt.x1+this._opt.x2),this.y=.5*(this._opt.y1+this._opt.y2)}},{key:"render",value:function(e){var t=e.context,n=e.convertPositionFromLocalCSToScreen(new f.default([this.x1,this.y1])),r=e.convertPositionFromLocalCSToScreen(new f.default([this.x2,this.y2])),i=n.x,o=n.y,u=r.x,a=r.y;t.beginPath(),t.moveTo(i,o),t.lineTo(u,a),this._opt.isStroked&&t.stroke()}},{key:"x1",get:function(){return this._opt.x1},set:function(e){this._opt.x1=e,this.x=.5*(this._opt.x1+this._opt.x2)}},{key:"y1",get:function(){return this._opt.y1},set:function(e){this._opt.y1=e,this.y=.5*(this._opt.y1+this._opt.y2)}},{key:"x2",get:function(){return this._opt.x2},set:function(e){this._opt.x2=e,this.x=.5*(this._opt.x1+this._opt.x2)}},{key:"y2",get:function(){return this._opt.y2},set:function(e){this._opt.y2=e,this.y=.5*(this._opt.y1+this._opt.y2)}}]),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),c=n(0),f=r(c),h=n(7),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._init(e),n}return u(t,e),a(t,[{key:"_init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"width"in e||(this._opt.width=0),"height"in e||(this._opt.height=0),"origin"in e||(this._opt.origin=h.ORIGIN.LEFT_TOP)}},{key:"render",value:function(e){var t=this._getOrigin(),n=e.context,r=t.x,i=t.y,o=this.width,u=this.height,a=e.convertPositionFromLocalCSToScreen(new f.default([r,i])),s=e.convertPositionFromLocalCSToScreen(new f.default([r,i+u])),l=e.convertPositionFromLocalCSToScreen(new f.default([r+o,i+u])),c=e.convertPositionFromLocalCSToScreen(new f.default([r+o,i]));n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(s.x,s.y),n.lineTo(l.x,l.y),n.lineTo(c.x,c.y),n.lineTo(a.x,a.y),this._opt.isStroked&&n.stroke(),this._opt.isFilled&&n.fill()}},{key:"_getOrigin",value:function(){if(this._opt.origin===h.ORIGIN.CENTER){var e=this.x-.5*this.width,t=this.y-.5*this.height;return new f.default([e,t])}return new f.default(this._position)}},{key:"width",get:function(){return this._opt.width},set:function(e){this._opt.width=e}},{key:"height",get:function(){return this._opt.height},set:function(e){this._opt.height=e}}]),t}(l.default);t.default=p},function(e,t){e.exports={name:"sketchbook.js",version:"0.1.4",description:"Sketchbook.js is a library that makes it easy to use canvas element.",main:"./dist/sketchbook.js",scripts:{setup:"npm install -g webpack && npm install",dev:"cross-env NODE_ENV=development webpack-dev-server --config ./webpack.config-page.js --progress --colors --open --hot",watch:"webpack --config ./webpack.config.js --progress --colors --watch",prebuild:"eslint lib pretest",build:"cross-env NODE_ENV=production webpack --config ./webpack.config.js --progress --colors --hide-modules",test:"karma start",citest:"karma start --single-run"},repository:{url:"https://github.com/egaoneko/sketchbook.js.git",type:"git"},author:"Donghyun Seo",license:"MIT",bugs:{url:"https://github.com/egaoneko/sketchbook.js/issues"},homepage:"hhttps://github.com/egaoneko/sketchbook.js#readme",devDependencies:{"babel-core":"^6.21.0","babel-loader":"^6.2.10","babel-preset-es2015":"^6.18.0","babel-preset-latest":"^6.22.0","babel-register":"^6.24.1","bdd-lazy-var":"^1.2.1",chai:"^3.5.0","cross-env":"^3.2.3","css-loader":"^0.26.1",eslint:"^3.13.1","eslint-loader":"^1.6.1","imports-loader":"^0.7.0",istanbul:"^0.4.5","istanbul-instrumenter-loader":"^2.0.0",karma:"^1.7.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-coverage-istanbul-reporter":"^1.3.0","karma-firefox-launcher":"^1.0.1","karma-mocha":"^1.3.0","karma-webpack":"^2.0.3",mocha:"^3.2.0","node-sass":"^4.3.0","sass-loader":"^4.1.1",sinon:"^1.17.7","style-loader":"^0.13.1",webpack:"^2.2.1","webpack-dev-server":"^2.2.1"},dependencies:{enumify:"^1.0.4",lodash:"^4.17.4","sylvester-es6":"0.0.2",uuid:"^3.0.1"}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),a=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.Enum);a.initEnum(["SCREEN","CARTESIAN"]),t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),a=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.Enum);a.initEnum(["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll"]),t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),a=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.Enum);a.initEnum(["POLYLINE","POLYGON"]),t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),a=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.Enum);a.initEnum(["CW","CCW"]),t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),a=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.Enum);a.initEnum(["LEFT_TOP","CENTER"]),t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(10),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),a=r(u),s=n(4),l=n(0),c=r(l),f=function(){function e(){i(this,e),this._minX=1/0,this._minY=1/0,this._maxX=-1/0,this._maxY=-1/0}return o(e,[{key:"add",value:function(e){var t=this;if(!(0,s.typeCheck)("array",e))return void this._add(e);a.default.each(e,function(e){t._add(e)})}},{key:"_add",value:function(e){if(!(e instanceof c.default))throw new TypeError("The parameter must be Point.");this._minX=Math.min(this._minX,e.x),this._minY=Math.min(this._minY,e.y),this._maxX=Math.max(this._maxX,e.x),this._maxY=Math.max(this._maxY,e.y)}},{key:"clear",value:function(){this._minX=1/0,this._minY=1/0,this._maxX=-1/0,this._maxY=-1/0}},{key:"center",get:function(){var e=.5*(this._minX+this._maxX),t=.5*(this._minY+this._maxY);return new c.default([e,t])}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),u=function(){function e(t){if(r(this,e),!t)throw new o.ArgumentError("A element must be needed for create.");this._element=t}return i(e,[{key:"addEventListener",value:function(e,t,n){return this._element.addEventListener(e,t,n),t}},{key:"addBaseEventListener",value:function(e,t,n,r){var i=function(){return e.apply(void 0,arguments),n.apply(void 0,arguments)};return this._element.addEventListener(t,i,r),i}},{key:"removeEventListener",value:function(e,t,n){this._element.removeEventListener(e,t,n)}},{key:"removeBaseEventListener",value:function(e,t,n){this.removeEventListener(e,t,n)}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},l=n(35),c=r(l),f=n(15),h=r(f),p=n(0),v=r(p),y=n(27),d=r(y),_=n(1),m=function(e){function t(e){if(i(this,t),!(e instanceof h.default))throw new _.ArgumentError("A element must be Sketchbook.");var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.canvas));return n.sketchbook=e,n}return u(t,e),a(t,[{key:"addEventListener",value:function(e,n,r){var i=this;if(!d.default.enumValueOf(e))return null;var o=function(e){var t=e.offsetX||e.pageX-i._element.offsetLeft,n=e.offsetY||e.pageY-i._element.offsetTop,r=i.sketchbook.basis.inverse().multiply(new v.default([t,n]));e.origin=new v.default([r.x,r.y])};return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addBaseEventListener",this).call(this,o,e,n,r)}}]),t}(c.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.global=t.Geometry3D=t.Geometry=t.Group=t.Line=t.Circle=t.Rect=t.Shape=t.Point=t.Sketchbook=void 0;var i=n(15),o=r(i),u=n(0),a=r(u),s=n(2),l=r(s),c=n(24),f=r(c),h=n(19),p=r(h),v=n(23),y=r(v),d=n(22),_=r(d),m=n(20),g=r(m),b=n(21),w=r(b),k=n(7),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(k),x=n(25);t.Sketchbook=o.default,t.Point=a.default,t.Shape=l.default,t.Rect=f.default,t.Circle=p.default,t.Line=y.default,t.Group=_.default,t.Geometry=g.default,t.Geometry3D=w.default,t.global=O,t.version=x.version},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(13),a=n(1),s=n(0),l=r(s),c=n(40),f=r(c),h=function(){function e(){i(this,e);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n.length>0,s=1!==n.length&&6!==n.length;if(o&&s)throw new a.ArgumentError("Initialized with wrong parameters.");if(6===n.length)return void(this._matrix=new u.Matrix([[n[0],n[2],n[4]],[n[1],n[3],n[5]],[0,0,1]]));if(1===n.length&&!(n[0]instanceof e))throw new TypeError("Initialized with wrong parameter.(Different class)");if(1===n.length)return void(this._matrix=n[0]._matrix.dup());this._matrix=u.Matrix.I(3)}return o(e,[{key:"equal",value:function(e){return this._matrix.eql(e._matrix)}},{key:"add",value:function(t){if(!(t instanceof e))throw new TypeError("Added by wrong parameter.(Different class)");var n=this._matrix.add(t._matrix);return new e(n.e(1,1),n.e(2,1),n.e(1,2),n.e(2,2),n.e(1,3),n.e(2,3))}},{key:"multiply",value:function(t){if(t instanceof e){var n=this._matrix.multiply(t._matrix);return new e(n.e(1,1),n.e(2,1),n.e(1,2),n.e(2,2),n.e(1,3),n.e(2,3))}if(t instanceof l.default){var r=this._matrix.multiply(t._vector),i=r.e(1),o=r.e(2);return new l.default([i,o])}throw new TypeError("Multiplied by wrong parameter.(Different class)")}},{key:"inverse",value:function(){var e=this._matrix.inverse();return e?new f.default(e):e}},{key:"a",get:function(){return this._matrix.e(1,1)}},{key:"b",get:function(){return this._matrix.e(2,1)}},{key:"c",get:function(){return this._matrix.e(1,2)}},{key:"d",get:function(){return this._matrix.e(2,2)}},{key:"e",get:function(){return this._matrix.e(1,3)}},{key:"f",get:function(){return this._matrix.e(2,3)}},{key:"rows",get:function(){return this._matrix.rows()}},{key:"cols",get:function(){return this._matrix.cols()}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=r(u),s=n(38),l=r(s),c=n(7),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this._position=new a.default([0,0]),this._pivot=new a.default([0,0]),this._xScale=1,this._yScale=1,this._radian=0,this._opt={orientation:c.ORIENTATION.CW},this._basis=new l.default,Object.assign(this._opt,t)}return o(e,[{key:"scale",value:function(e,t){var n=new l.default(e,0,0,t,0,0);this._xScale*=e,this._yScale*=t,this._basis=this._basis.multiply(n)}},{key:"setScale",value:function(e,t){this._xScale=e,this._yScale=t,this._basis=this.getAffineTransform(this._xScale,this._yScale,this._radian,this._position,this._pivot)}},{key:"rotate",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0;this._opt.orientation===c.ORIENTATION.CCW?(t=Math.cos(e),n=-Math.sin(e),r=Math.sin(e),i=Math.cos(e)):(t=Math.cos(e),n=Math.sin(e),r=-Math.sin(e),i=Math.cos(e));var o=new l.default(t,n,r,i,0,0);this._radian+=e,this._basis=this._basis.multiply(o)}},{key:"setRotate",value:function(e){this._radian=e,this._basis=this.getAffineTransform(this._xScale,this._yScale,this._radian,this._position,this._pivot)}},{key:"translate",value:function(e){var t=new l.default(1,0,0,1,e.x,e.y);this._position=this._position.add(new a.default(e)),this._basis=this._basis.multiply(t)}},{key:"setTranslate",value:function(e){this._position=new a.default(e),this._basis=this.getAffineTransform(this._xScale,this._yScale,this._radian,this._position,this._pivot)}},{key:"getAffineTransform",value:function(e,t,n,r,i){var o=void 0,u=void 0,a=void 0,s=void 0,f=new l.default;return i&&(f=f.multiply(new l.default(1,0,0,1,i.x,i.y))),f=f.multiply(new l.default(e,0,0,t,0,0)),this._opt.orientation===c.ORIENTATION.CCW?(o=Math.cos(n),u=-Math.sin(n),a=Math.sin(n),s=Math.cos(n)):(o=Math.cos(n),u=Math.sin(n),a=-Math.sin(n),s=Math.cos(n)),f=f.multiply(new l.default(o,u,a,s,0,0)),f=f.multiply(new l.default(1,0,0,1,r.x,r.y)),i&&(f=f.multiply(new l.default(1,0,0,1,-i.x,-i.y))),f}},{key:"getTransformedPoint",value:function(e){var t=this.basis.inverse();return t?t.multiply(e):new a.default([0,0])}},{key:"getOption",value:function(e){return void 0!==e&&null!==e?this._opt[e]:null}},{key:"setOption",value:function(e,t){var n=void 0!==e&&null!==e,r=void 0!==t&&null!==t;n&&r&&(this._opt[e]=t)}},{key:"pivot",get:function(){return new a.default(this._pivot)},set:function(e){this._pivot=new a.default(e)}},{key:"basis",get:function(){return new l.default(this._basis)},set:function(e){if(!(e instanceof l.default))throw new TypeError("Input basis is not CanvasMatrix.");this._basis=e}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},s=n(13),l=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),u(t,[{key:"multiply",value:function(e){if(e instanceof c.default){var n=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"multiply",this).call(this,e._vector);if(!n)return n;var r=n.e(1),i=n.e(2);return new c.default([r,i])}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"multiply",this).call(this,e)}}]),t}(s.Matrix);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CircularLinkedList=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),s=t.CircularLinkedList=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),u(t,[{key:"append",value:function(e){null===this.first?(e.prev=e,e.next=e,this.first=e,this.last=e):(e.prev=this.last,e.next=this.first,this.first.prev=e,this.last.next=e,this.last=e),this.length++}},{key:"prepend",value:function(e){if(null===this.first)return void this.append(e);e.prev=this.last,e.next=this.first,this.first.prev=e,this.last.next=e,this.first=e,this.length++}},{key:"insertAfter",value:function(e,t){t.prev=e,t.next=e.next,e.next.prev=t,e.next=t,t.prev===this.last&&(this.last=t),this.length++}},{key:"insertBefore",value:function(e,t){t.prev=e.prev,t.next=e,e.prev.next=t,e.prev=t,t.next===this.first&&(this.first=t),this.length++}},{key:"remove",value:function(e){this.length>1?(e.prev.next=e.next,e.next.prev=e.prev,e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)):(this.first=null,this.last=null),e.prev=null,e.next=null,this.length--}},{key:"withData",value:function(e){for(var t=this.first,n=this.last,r=Math.ceil(this.length/2);r--;){if(t.data===e)return t;if(n.data===e)return n;t=t.next,n=n.prev}return null}}]),t}(a.LinkedList);s.fromArray=function(e,t){for(var n=new s,r=e.length;r--;)n.prepend(t?new a.LinkedList.Node(e[r]):e[r]);return n}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LineSegment=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),u=n(12),a=n(11);t.LineSegment=function(){function e(t,n){r(this,e),this.setPoints(t,n)}return i(e,[{key:"eql",value:function(e){return this.start.eql(e.start)&&this.end.eql(e.end)||this.start.eql(e.end)&&this.end.eql(e.start)}},{key:"dup",value:function(){return new e(this.start,this.end)}},{key:"length",value:function(){var e=this.start.elements,t=this.end.elements,n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}},{key:"toVector",value:function(){var e=this.start.elements,t=this.end.elements;return new o.Vector([t[0]-e[0],t[1]-e[1],t[2]-e[2]])}},{key:"midpoint",value:function(){var e=this.start.elements,t=this.end.elements;return new o.Vector([(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2])}},{key:"bisectingPlane",value:function(){return new u.Plane(this.midpoint(),this.toVector())}},{key:"translate",value:function(t){var n=t.elements||t,r=this.start.elements,i=this.end.elements;return new e([r[0]+n[0],r[1]+n[1],r[2]+(n[2]||0)],[i[0]+n[0],i[1]+n[1],i[2]+(n[2]||0)])}},{key:"isParallelTo",value:function(e){return this.line.isParallelTo(e)}},{key:"distanceFrom",value:function(e){var t=this.pointClosestTo(e);return null===t?null:t.distanceFrom(e)}},{key:"contains",value:function(e){if(e.start&&e.end)return this.contains(e.start)&&this.contains(e.end);var t=(e.elements||e).slice();if(2===t.length&&t.push(0),this.start.eql(t))return!0;var n=this.start.elements,r=new o.Vector([n[0]-t[0],n[1]-t[1],n[2]-(t[2]||0)]),i=this.toVector();return r.isAntiparallelTo(i)&&r.modulus()<=i.modulus()}},{key:"intersects",value:function(e){return null!==this.intersectionWith(e)}},{key:"intersectionWith",value:function(e){if(!this.line.intersects(e))return null;var t=this.line.intersectionWith(e);return this.contains(t)?t:null}},{key:"pointClosestTo",value:function(e){if(e.normal){var t=this.line.intersectionWith(e);return null===t?null:this.pointClosestTo(t)}var n=this.line.pointClosestTo(e);return null===n?null:this.contains(n)?n:(this.line.positionOf(n)<0?this.start:this.end).dup()}},{key:"setPoints",value:function(e,t){return e=new o.Vector(e).to3D(),t=new o.Vector(t).to3D(),null===e||null===t?null:(this.line=new a.Line(e,t.subtract(e)),this.start=e,this.end=t,this)}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.LinkedListNode=function e(t){r(this,e),this.prev=null,this.next=null,this.data=t}},function(e,t,n){"use strict";function r(e){var t="";if(16==e.length)for(var n=0;n<4;n++)t+="<span style='font-family: monospace'>["+e[4*n+0].toFixed(4)+","+e[4*n+1].toFixed(4)+","+e[4*n+2].toFixed(4)+","+e[4*n+3].toFixed(4)+"]</span><br>";else{if(9!=e.length)return e.toString();for(var n=0;n<3;n++)t+="<span style='font-family: monospace'>["+e[3*n+0].toFixed(4)+","+e[3*n+1].toFixed(4)+","+e[3*n+2].toFixed(4)+"]</font><br>"}return t}function i(e,t,n,r,i,o,u,a,c){var f=new s.Vector([e,t,n]),h=new s.Vector([r,i,o]),p=new s.Vector([u,a,c]),v=f.subtract(h).toUnitVector(),y=p.cross(v).toUnitVector(),d=v.cross(y).toUnitVector(),_=new l.Matrix([[y.e(1),y.e(2),y.e(3),0],[d.e(1),d.e(2),d.e(3),0],[v.e(1),v.e(2),v.e(3),0],[0,0,0,1]]),m=new l.Matrix([[1,0,0,-e],[0,1,0,-t],[0,0,1,-n],[0,0,0,1]]);return _.x(m)}function o(e,t,n,r,i,o){var u=-(t+e)/(t-e),a=-(r+n)/(r-n),s=-(o+i)/(o-i);return new l.Matrix([[2/(t-e),0,0,u],[0,2/(r-n),0,a],[0,0,-2/(o-i),s],[0,0,0,1]])}function u(e,t,n,r){var i=n*Math.tan(e*Math.PI/360),o=-i;return a(o*t,i*t,o,i,n,r)}function a(e,t,n,r,i,o){var u=2*i/(t-e),a=2*i/(r-n),s=(t+e)/(t-e),c=(r+n)/(r-n),f=-(o+i)/(o-i),h=-2*o*i/(o-i);return new l.Matrix([[u,0,s,0],[0,a,c,0],[0,0,f,h],[0,0,-1,0]])}function o(e,t,n,r,i,o){var u=-(t+e)/(t-e),a=-(r+n)/(r-n),s=-(o+i)/(o-i);return new l.Matrix([[2/(t-e),0,0,u],[0,2/(r-n),0,a],[0,0,-2/(o-i),s],[0,0,0,1]])}Object.defineProperty(t,"__esModule",{value:!0}),t.mht=r,t.makeLookAt=i,t.makeOrtho=o,t.makePerspective=u,t.makeFrustum=a,t.makeOrtho=o;var s=n(3),l=n(6)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Vertex=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),s=n(5),l=(n(17),t.Vertex=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));if(n.setElements(e),2===n.elements.length&&n.elements.push(0),3!==n.elements.length){var o;return o=null,i(n,o)}return n}return o(t,e),u(t,[{key:"isConvex",value:function(e){var t=e.nodeFor(this);if(null===t)return null;var n=t.prev.data,r=t.next.data,i=r.subtract(this),o=n.subtract(this),u=i.angleFrom(o);return u<=s.PRECISION||!(Math.abs(u-Math.PI)<=s.PRECISION)&&i.cross(o).dot(e.plane.normal)>0}},{key:"isReflex",value:function(e){var t=this.isConvex(e);return null===t?null:!t}},{key:"type",value:function(e){var t=this.isConvex(e);return null===t?null:t?"convex":"reflex"}}]),t}(a.Vector));l.convert=function(e){for(var t=e.toArray?e.toArray():e,n=[],r=t.length,i=0;i<r;i++)n.push(new l(t[i]));return n}},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(18))},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var u=e.random||(e.rng||i)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,t)for(var a=0;a<16;++a)t[r+a]=u[a];return t||o(u)}var i=n(47),o=n(46);e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}])});
//# sourceMappingURL=sketchbook.js.map